/* ==========================================================================
   Theme CSS — single source of truth for CSS custom properties + helpers.
   Every colour is stored as space-separated R G B channels so that Tailwind's
   opacity modifier syntax (bg-theme-bg/60) works correctly.
   
   Usage from Tailwind config:
     bg: 'rgb(var(--bg-deep) / <alpha-value>)'
   ========================================================================== */

/* ---------- Default: Slate ---------- */
:root {
  --bg-deep: 15 23 42;         /* #0f172a */
  --bg-space: 27 41 62;        /* #1B293E */
  --surface-1: 30 41 59;       /* #1e293b */
  --surface-2: 51 65 85;       /* #334155 */
  --border: 71 85 105;         /* #475569 */
  --cyan: 59 130 246;          /* #3b82f6 */
  --magenta: 236 72 153;       /* #ec4899 */
  --violet: 139 92 246;        /* #8b5cf6 */
  --purple: 30 27 75;          /* #1e1b4b */
  --lav: 216 180 254;          /* #d8b4fe */
  --text: 241 245 249;         /* #f1f5f9 */
  --muted: 148 163 184;        /* #94a3b8 */
  --success: 16 185 129;       /* #10b981 */
  --warning: 245 158 11;       /* #f59e0b */
  --danger: 239 68 68;         /* #ef4444 */

  --shadow-glow-cyan: 0 0 10px rgba(59, 130, 246, 0.3);
  --shadow-glow-magenta: 0 0 10px rgba(236, 72, 153, 0.3);
  --shadow-card: 0 10px 30px rgba(0,0,0,.45);

  --grad-space: radial-gradient(1200px circle at 50% 20%, #1e293b 0%, #0f172a 100%);
  --font-brand: 'Inter';

  /* ==========================================================================
     Semantic chrome tokens (defaults map to base tokens)
     ========================================================================== */

  /* Header bar */
  --header-bg-1: var(--surface-2);
  --header-bg-2: var(--surface-1);
  --header-border: var(--border);
  --header-text: var(--text);

  /* Common titlebar presets (overridable per-theme) */
  --bar-neutral-bg-1: var(--surface-2);
  --bar-neutral-bg-2: var(--surface-1);
  --bar-neutral-text: var(--text);
  --bar-neutral-border: var(--border);

  --bar-red-bg-1: var(--magenta);
  --bar-red-bg-2: var(--magenta);
  --bar-red-text: var(--text);
  --bar-red-border: var(--border);

  --bar-yellow-bg-1: var(--warning);
  --bar-yellow-bg-2: var(--warning);
  --bar-yellow-text: var(--bg-deep);
  --bar-yellow-border: var(--border);

  --bar-blue-bg-1: var(--cyan);
  --bar-blue-bg-2: var(--cyan);
  --bar-blue-text: var(--bg-deep);
  --bar-blue-border: var(--border);

  --bar-brown-bg-1: var(--surface-2);
  --bar-brown-bg-2: var(--surface-1);
  --bar-brown-text: var(--text);
  --bar-brown-border: var(--border);

  --bar-dark-bg-1: var(--bg-deep);
  --bar-dark-bg-2: var(--bg-deep);
  --bar-dark-text: var(--text);
  --bar-dark-border: var(--border);

  /* Brown-style module panels (sidebar / memo) */
  --panel-bg-1: var(--surface-1);
  --panel-bg-2: var(--surface-1);
  --panel-border: var(--border);
  --panel-inset-hi: 255 255 255;
  --panel-inset-lo: 0 0 0;
  --panel-title-bg-1: var(--surface-2);
  --panel-title-bg-2: var(--surface-1);
  --panel-title-text: var(--text);

  /* Dark “screen” panels (map / charts) */
  --screen-bg-1: var(--bg-deep);
  --screen-bg-2: var(--bg-deep);
  --screen-border: var(--border);
  --screen-inset-hi: 255 255 255;
  --screen-inset-lo: 0 0 0;
  --screen-title-bg-1: var(--surface-2);
  --screen-title-bg-2: var(--surface-1);
  --screen-title-text: var(--text);

  /* KPI blocks (big + tiles) */
  --kpi-bg-1: var(--surface-1);
  --kpi-bg-2: var(--surface-2);
  --kpi-border: var(--border);
  --kpi-title-bg-1: var(--surface-2);
  --kpi-title-bg-2: var(--surface-1);
  --kpi-title-text: var(--text);
  --kpi-value-text: var(--text);

  /* KPI variants (fallback to base KPI tokens) */
  --kpi-main-bg-1: var(--kpi-bg-1);
  --kpi-main-bg-2: var(--kpi-bg-2);
  --kpi-main-border: var(--kpi-border);
  --kpi-main-title-bg-1: var(--kpi-title-bg-1);
  --kpi-main-title-bg-2: var(--kpi-title-bg-2);
  --kpi-main-title-text: var(--kpi-title-text);
  --kpi-main-value-text: var(--kpi-value-text);

  --kpi-tile-bg-1: var(--kpi-bg-1);
  --kpi-tile-bg-2: var(--kpi-bg-2);
  --kpi-tile-border: var(--kpi-border);
  --kpi-tile-title-bg-1: var(--kpi-title-bg-1);
  --kpi-tile-title-bg-2: var(--kpi-title-bg-2);
  --kpi-tile-title-text: var(--kpi-title-text);
  --kpi-tile-value-text: var(--kpi-value-text);

  /* Buttons (embossed) */
  --btn-primary-bg-1: var(--cyan);
  --btn-primary-bg-2: var(--cyan);
  --btn-primary-border: var(--cyan);
  --btn-primary-text: var(--bg-deep);

  --btn-secondary-bg-1: var(--surface-2);
  --btn-secondary-bg-2: var(--surface-1);
  --btn-secondary-border: var(--border);
  --btn-secondary-text: var(--text);

  /* Radii */
  --radius-panel: 18px;
  --radius-kpi: 18px;

  /* Light inset surfaces (used by Scenario page Classic mode) */
  --inset-bg-1: 255 255 255;
  --inset-bg-2: 245 247 250;
  --inset-border: var(--border);
  --inset-text: var(--text);
  --inset-muted: var(--muted);
}

/* ---------- Synthwave ---------- */
[data-theme='synthwave'] {
  --bg-deep: 14 6 26;          /* #0E061A */
  --bg-space: 27 14 43;        /* #1B0E2B */
  --surface-1: 35 37 88;       /* #232558 */
  --surface-2: 47 56 135;      /* #2F3887 */
  --border: 96 83 160;         /* #6053A0 */
  --cyan: 158 211 240;         /* #9ED3F0 */
  --magenta: 229 102 218;      /* #E566DA */
  --violet: 149 42 153;        /* #952A99 */
  --purple: 84 25 99;          /* #541963 */
  --lav: 219 161 221;          /* #DBA1DD */
  --text: 235 233 238;         /* #EBE9EE */
  --muted: 168 163 168;        /* #A8A3A8 */
  --success: 45 255 177;       /* #2DFFB1 */
  --warning: 255 184 107;      /* #FFB86B */
  --danger: 255 79 163;        /* #FF4FA3 */

  --shadow-glow-cyan: 0 0 18px rgba(158,211,240,.45), 0 0 48px rgba(158,211,240,.25);
  --shadow-glow-magenta: 0 0 18px rgba(229,102,218,.45), 0 0 48px rgba(229,102,218,.25);
  --shadow-card: 0 10px 30px rgba(0,0,0,.55);

  --grad-space: radial-gradient(1200px circle at 50% 20%, #541963 0%, #1B0E2B 45%, #0E061A 100%);
  --font-brand: 'Orbitron';
}

/* ---------- Tropical / Tommy Bahama ---------- */
[data-theme='tropical'] {
  --bg-deep: 18 28 40;         /* dark ocean midnight */
  --bg-space: 26 35 50;        /* deep lagoon */
  --surface-1: 30 50 60;       /* driftwood dark */
  --surface-2: 42 72 82;       /* wet palm bark */
  --border: 45 212 191;        /* seafoam teal (accent border) */
  --cyan: 45 212 191;          /* teal-400  – primary accent */
  --magenta: 249 115 22;       /* orange-500 – coral / sunset */
  --violet: 192 132 252;       /* purple-400 */
  --purple: 30 58 48;          /* deep palm shadow */
  --lav: 253 186 116;          /* light sunset peach */
  --text: 236 242 238;         /* off-white sea-foam */
  --muted: 148 180 170;        /* faded palm green */
  --success: 52 211 153;       /* emerald-400 */
  --warning: 251 191 36;       /* amber-400 */
  --danger: 248 113 113;       /* red-400 */

  --shadow-glow-cyan: 0 0 14px rgba(45, 212, 191, 0.35), 0 0 40px rgba(45, 212, 191, 0.15);
  --shadow-glow-magenta: 0 0 14px rgba(249, 115, 22, 0.35), 0 0 40px rgba(249, 115, 22, 0.15);
  --shadow-card: 0 10px 30px rgba(0,0,0,.45);

  --grad-space: radial-gradient(1200px circle at 50% 20%, #1e3a30 0%, #1a2332 50%, #121c28 100%);
  --font-brand: 'Inter';
}

/* ---------- Mario (Slopcast Classic) ---------- */
[data-theme='mario'] {
  /* Light canvas behind the modules */
  --bg-deep: 243 239 233;        /* #F3EFE9 */
  --bg-space: 251 249 246;       /* #FBF9F6 */

  /* Core surfaces (most UI is dark modules) */
  --surface-1: 15 29 48;         /* #0F1D30 (navy) */
  --surface-2: 21 41 68;         /* #152944 (navy lift) */
  --border: 201 177 139;         /* #C9B18B (sand) */

  /* Accents */
  --cyan: 18 112 255;            /* #1270FF (classic blue) */
  --magenta: 220 0 0;            /* #DC0000 (classic red) */
  --violet: 255 122 0;           /* orange pop */
  --purple: 15 29 48;            /* navy (avoid dominant brown) */
  --lav: 255 213 0;              /* #FFD500 (gold) */

  /* Text */
  --text: 255 255 255;           /* white on modules */
  --muted: 233 223 205;          /* warm sand */

  /* States */
  --success: 56 150 36;          /* green KPI fill */
  --warning: 255 213 0;          /* yellow title bars */
  --danger: 220 0 0;             /* red title bars */

  /* Shadows (no neon in classic theme) */
  --shadow-glow-cyan: 0 0 0 rgba(0,0,0,0);
  --shadow-glow-magenta: 0 0 0 rgba(0,0,0,0);
  --shadow-card: 0 6px 12px rgba(0,0,0,0.35);

  --grad-space: radial-gradient(1200px circle at 45% -10%, #ffffff 0%, #f3efe9 42%, #e7e0d6 100%);
  --font-brand: 'Inter';

  /* Header chrome (blue) */
  --header-bg-1: 18 112 255;     /* #1270FF */
  --header-bg-2: 8 56 158;       /* #08389E */
  --header-border: 3 18 54;      /* #031236 */
  --header-text: 255 255 255;

  /* Titlebar presets (match screenshot) */
  --bar-red-bg-1: 220 0 0;       /* #DC0000 */
  --bar-red-bg-2: 150 0 0;       /* #960000 */
  --bar-red-text: 255 255 255;
  --bar-red-border: 58 0 0;      /* #3A0000 */

  --bar-yellow-bg-1: 255 213 0;  /* #FFD500 */
  --bar-yellow-bg-2: 216 160 0;  /* #D8A000 */
  --bar-yellow-text: 34 24 10;   /* #22180A */
  --bar-yellow-border: 120 70 0; /* #784600 */

  --bar-blue-bg-1: 23 105 235;   /* #1769EB */
  --bar-blue-bg-2: 8 56 158;     /* #08389E */
  --bar-blue-text: 255 255 255;
  --bar-blue-border: 3 18 54;

  /* Neutral module chrome (replaces old "brown" dominance). */
  --bar-neutral-bg-1: 21 41 68;  /* #152944 */
  --bar-neutral-bg-2: 15 29 48;  /* #0F1D30 */
  --bar-neutral-text: 255 255 255;
  --bar-neutral-border: 7 18 33; /* #071221 */

  /* Back-compat: anything still using --bar-brown maps to neutral. */
  --bar-brown-bg-1: var(--bar-neutral-bg-1);
  --bar-brown-bg-2: var(--bar-neutral-bg-2);
  --bar-brown-text: var(--bar-neutral-text);
  --bar-brown-border: var(--bar-neutral-border);

  --bar-dark-bg-1: 24 24 24;     /* #181818 */
  --bar-dark-bg-2: 10 10 10;     /* #0A0A0A */
  --bar-dark-text: 255 255 255;
  --bar-dark-border: 60 60 60;   /* #3C3C3C */

  /* Module panels */
  --panel-bg-1: var(--surface-2);
  --panel-bg-2: var(--surface-1);
  --panel-border: var(--border);
  --panel-inset-hi: 255 210 155;
  --panel-inset-lo: 0 0 0;
  --panel-title-bg-1: var(--bar-neutral-bg-1);
  --panel-title-bg-2: var(--bar-neutral-bg-2);
  --panel-title-text: 255 255 255;

  /* Dark “screens” (map / charts) */
  --screen-bg-1: 26 26 26;       /* #1A1A1A */
  --screen-bg-2: 10 10 10;       /* #0A0A0A */
  --screen-border: 76 76 76;     /* #4C4C4C */
  --screen-inset-hi: 255 255 255;
  --screen-inset-lo: 0 0 0;
  --screen-title-bg-1: var(--bar-neutral-bg-1);
  --screen-title-bg-2: var(--bar-neutral-bg-2);
  --screen-title-text: 255 255 255;

  /* KPI styling */
  --kpi-bg-1: 56 150 36;
  --kpi-bg-2: 34 120 22;
  --kpi-border: var(--border);
  --kpi-title-bg-1: var(--bar-yellow-bg-1);
  --kpi-title-bg-2: var(--bar-yellow-bg-2);
  --kpi-title-text: var(--bar-yellow-text);
  --kpi-value-text: 255 255 255;

  /* KPI main (big NPV card) */
  --kpi-main-bg-1: 56 150 36;
  --kpi-main-bg-2: 34 120 22;
  --kpi-main-border: var(--border);
  --kpi-main-title-bg-1: var(--bar-red-bg-1);
  --kpi-main-title-bg-2: var(--bar-red-bg-2);
  --kpi-main-title-text: var(--bar-red-text);
  --kpi-main-value-text: 255 255 255;

  /* KPI tiles (smaller blocks) */
  --kpi-tile-bg-1: 56 150 36;
  --kpi-tile-bg-2: 34 120 22;
  --kpi-tile-border: var(--border);
  --kpi-tile-title-bg-1: var(--bar-yellow-bg-1);
  --kpi-tile-title-bg-2: var(--bar-yellow-bg-2);
  --kpi-tile-title-text: var(--bar-yellow-text);
  --kpi-tile-value-text: 255 255 255;

  /* Buttons */
  --btn-primary-bg-1: var(--bar-yellow-bg-1);
  --btn-primary-bg-2: var(--bar-yellow-bg-2);
  --btn-primary-border: var(--bar-red-bg-2);  /* red outline like screenshot */
  --btn-primary-text: var(--bar-yellow-text);

  --btn-secondary-bg-1: 21 41 68;
  --btn-secondary-bg-2: 15 29 48;
  --btn-secondary-border: var(--border);
  --btn-secondary-text: 255 255 255;

  /* Tighter corners like the classic UI */
  --radius-panel: 8px;
  --radius-kpi: 8px;

  /* Light inset surfaces (cream UI for controls/tables) */
  --inset-bg-1: 255 251 242;      /* #FFFBF2 */
  --inset-bg-2: 248 240 225;      /* #F8F0E1 */
  --inset-border: var(--border);
  --inset-text: 20 30 42;         /* slate ink */
  --inset-muted: 71 85 105;       /* muted slate */
}

/* ==========================================================================
   Global base styles
   ========================================================================== */

body {
  font-family: 'Inter', sans-serif;
  background: var(--grad-space);
  color: rgb(var(--text));
  margin: 0;
  transition: background 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 100vh;
}

/* ---------- Utility helper classes (variable-driven) ---------- */

.brand-title {
  font-family: var(--font-brand);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  font-weight: 900;
}

.brand-font {
  font-family: var(--font-brand);
}

.theme-transition {
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hide scrollbars but keep scrolling (used with Tailwind CDN utilities). */
.scrollbar-hide {
  -ms-overflow-style: none; /* IE/Edge legacy */
  scrollbar-width: none;    /* Firefox */
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;            /* Chrome/Safari */
}

/* ==========================================================================
   Slopcast “chrome” primitives (.sc-*)
   Rendered via semantic tokens above; overridden per-theme.
   ========================================================================== */

.sc-header {
  background: linear-gradient(to bottom, rgb(var(--header-bg-1)), rgb(var(--header-bg-2)));
  border-bottom: 1px solid rgb(var(--header-border) / 0.9);
  color: rgb(var(--header-text));
  box-shadow:
    0 1px 0 rgb(255 255 255 / 0.06),
    0 10px 20px rgba(0,0,0,0.22);
}

.sc-panel,
.sc-screen,
.sc-kpi {
  position: relative;
  overflow: hidden;
}

.sc-panel {
  border-radius: var(--radius-panel);
  border: 1px solid rgb(var(--panel-border) / 0.85);
  background: linear-gradient(to bottom, rgb(var(--panel-bg-1)), rgb(var(--panel-bg-2)));
  box-shadow: var(--shadow-card);
}

.sc-panel::before {
  content: '';
  position: absolute;
  inset: 1px;
  pointer-events: none;
  border-radius: calc(var(--radius-panel) - 2px);
  box-shadow:
    inset 0 1px 0 rgb(var(--panel-inset-hi) / 0.22),
    inset 0 -1px 0 rgb(var(--panel-inset-lo) / 0.25);
}

.sc-panelTitlebar {
  background: linear-gradient(
    to bottom,
    rgb(var(--_panel-title-bg-1, var(--panel-title-bg-1))),
    rgb(var(--_panel-title-bg-2, var(--panel-title-bg-2)))
  );
  color: rgb(var(--_panel-title-text, var(--panel-title-text)));
  border-bottom: 1px solid rgb(var(--_panel-title-border, var(--panel-border)) / 0.90);
}

.sc-screen {
  border-radius: var(--radius-panel);
  border: 1px solid rgb(var(--screen-border) / 0.9);
  background: linear-gradient(to bottom, rgb(var(--screen-bg-1)), rgb(var(--screen-bg-2)));
  box-shadow: var(--shadow-card);
}

.sc-screen::before {
  content: '';
  position: absolute;
  inset: 1px;
  pointer-events: none;
  border-radius: calc(var(--radius-panel) - 2px);
  box-shadow:
    inset 0 1px 0 rgb(var(--screen-inset-hi) / 0.10),
    inset 0 -1px 0 rgb(var(--screen-inset-lo) / 0.35);
}

.sc-screenTitlebar {
  background: linear-gradient(
    to bottom,
    rgb(var(--_screen-title-bg-1, var(--screen-title-bg-1))),
    rgb(var(--_screen-title-bg-2, var(--screen-title-bg-2)))
  );
  color: rgb(var(--_screen-title-text, var(--screen-title-text)));
  border-bottom: 1px solid rgb(var(--_screen-title-border, var(--screen-border)) / 0.90);
}

/* Titlebar variants (work for both panels + screens) */
.sc-titlebar--red {
  --_panel-title-bg-1: var(--bar-red-bg-1);
  --_panel-title-bg-2: var(--bar-red-bg-2);
  --_panel-title-text: var(--bar-red-text);
  --_panel-title-border: var(--bar-red-border);
  --_screen-title-bg-1: var(--bar-red-bg-1);
  --_screen-title-bg-2: var(--bar-red-bg-2);
  --_screen-title-text: var(--bar-red-text);
  --_screen-title-border: var(--bar-red-border);
}
.sc-titlebar--yellow {
  --_panel-title-bg-1: var(--bar-yellow-bg-1);
  --_panel-title-bg-2: var(--bar-yellow-bg-2);
  --_panel-title-text: var(--bar-yellow-text);
  --_panel-title-border: var(--bar-yellow-border);
  --_screen-title-bg-1: var(--bar-yellow-bg-1);
  --_screen-title-bg-2: var(--bar-yellow-bg-2);
  --_screen-title-text: var(--bar-yellow-text);
  --_screen-title-border: var(--bar-yellow-border);
}
.sc-titlebar--blue {
  --_panel-title-bg-1: var(--bar-blue-bg-1);
  --_panel-title-bg-2: var(--bar-blue-bg-2);
  --_panel-title-text: var(--bar-blue-text);
  --_panel-title-border: var(--bar-blue-border);
  --_screen-title-bg-1: var(--bar-blue-bg-1);
  --_screen-title-bg-2: var(--bar-blue-bg-2);
  --_screen-title-text: var(--bar-blue-text);
  --_screen-title-border: var(--bar-blue-border);
}
.sc-titlebar--neutral {
  --_panel-title-bg-1: var(--bar-neutral-bg-1);
  --_panel-title-bg-2: var(--bar-neutral-bg-2);
  --_panel-title-text: var(--bar-neutral-text);
  --_panel-title-border: var(--bar-neutral-border);
  --_screen-title-bg-1: var(--bar-neutral-bg-1);
  --_screen-title-bg-2: var(--bar-neutral-bg-2);
  --_screen-title-text: var(--bar-neutral-text);
  --_screen-title-border: var(--bar-neutral-border);
}
.sc-titlebar--brown {
  --_panel-title-bg-1: var(--bar-brown-bg-1);
  --_panel-title-bg-2: var(--bar-brown-bg-2);
  --_panel-title-text: var(--bar-brown-text);
  --_panel-title-border: var(--bar-brown-border);
  --_screen-title-bg-1: var(--bar-brown-bg-1);
  --_screen-title-bg-2: var(--bar-brown-bg-2);
  --_screen-title-text: var(--bar-brown-text);
  --_screen-title-border: var(--bar-brown-border);
}
.sc-titlebar--dark {
  --_panel-title-bg-1: var(--bar-dark-bg-1);
  --_panel-title-bg-2: var(--bar-dark-bg-2);
  --_panel-title-text: var(--bar-dark-text);
  --_panel-title-border: var(--bar-dark-border);
  --_screen-title-bg-1: var(--bar-dark-bg-1);
  --_screen-title-bg-2: var(--bar-dark-bg-2);
  --_screen-title-text: var(--bar-dark-text);
  --_screen-title-border: var(--bar-dark-border);
}

/* KPI blocks */
.sc-kpi {
  border-radius: var(--radius-kpi);
  border: 1px solid rgb(var(--_kpi-border, var(--kpi-border)) / 1);
  background: linear-gradient(
    to bottom,
    rgb(var(--_kpi-bg-1, var(--kpi-bg-1))),
    rgb(var(--_kpi-bg-2, var(--kpi-bg-2)))
  );
  box-shadow: var(--shadow-card);
}

.sc-kpi::before {
  content: '';
  position: absolute;
  inset: 1px;
  pointer-events: none;
  border-radius: calc(var(--radius-kpi) - 2px);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.18),
    inset 0 -1px 0 rgb(0 0 0 / 0.25);
}

.sc-kpiTitlebar {
  background: linear-gradient(
    to bottom,
    rgb(var(--_kpi-title-bg-1, var(--kpi-title-bg-1))),
    rgb(var(--_kpi-title-bg-2, var(--kpi-title-bg-2)))
  );
  color: rgb(var(--_kpi-title-text, var(--kpi-title-text)));
  border-bottom: 1px solid rgb(var(--_kpi-border, var(--kpi-border)) / 1);
}

.sc-kpiValue {
  color: rgb(var(--_kpi-value-text, var(--kpi-value-text)));
}

.sc-kpi--main {
  --_kpi-bg-1: var(--kpi-main-bg-1);
  --_kpi-bg-2: var(--kpi-main-bg-2);
  --_kpi-border: var(--kpi-main-border);
  --_kpi-title-bg-1: var(--kpi-main-title-bg-1);
  --_kpi-title-bg-2: var(--kpi-main-title-bg-2);
  --_kpi-title-text: var(--kpi-main-title-text);
  --_kpi-value-text: var(--kpi-main-value-text);
}

.sc-kpi--tile {
  --_kpi-bg-1: var(--kpi-tile-bg-1);
  --_kpi-bg-2: var(--kpi-tile-bg-2);
  --_kpi-border: var(--kpi-tile-border);
  --_kpi-title-bg-1: var(--kpi-tile-title-bg-1);
  --_kpi-title-bg-2: var(--kpi-tile-title-bg-2);
  --_kpi-title-text: var(--kpi-tile-title-text);
  --_kpi-value-text: var(--kpi-tile-value-text);
}

.sc-kpi--dangerBody {
  --_kpi-bg-1: var(--danger);
  --_kpi-bg-2: var(--danger);
  --_kpi-border: var(--bar-red-border);
  --_kpi-value-text: 255 255 255;
}

/* Buttons */
.sc-btnPrimary {
  background: linear-gradient(to bottom, rgb(var(--btn-primary-bg-1)), rgb(var(--btn-primary-bg-2)));
  border: 1px solid rgb(var(--btn-primary-border) / 1);
  color: rgb(var(--btn-primary-text));
  box-shadow:
    0 1px 0 rgb(255 255 255 / 0.15),
    0 10px 18px rgba(0,0,0,0.25);
}
.sc-btnPrimary:hover { filter: brightness(1.05); }
.sc-btnPrimary:active { transform: translateY(1px); }

.sc-btnSecondary {
  background: linear-gradient(to bottom, rgb(var(--btn-secondary-bg-1)), rgb(var(--btn-secondary-bg-2)));
  border: 1px solid rgb(var(--btn-secondary-border) / 0.95);
  color: rgb(var(--btn-secondary-text));
  box-shadow:
    0 1px 0 rgb(255 255 255 / 0.10),
    0 10px 18px rgba(0,0,0,0.20);
}
.sc-btnSecondary:hover { filter: brightness(1.04); }
.sc-btnSecondary:active { transform: translateY(1px); }

/* ==========================================================================
   Light inset primitives (cream/white surfaces for Classic controls/tables)
   ========================================================================== */

.sc-insetLight {
  background: linear-gradient(to bottom, rgb(var(--inset-bg-1)), rgb(var(--inset-bg-2)));
  border: 1px solid rgb(var(--inset-border) / 0.65);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.75),
    inset 0 -1px 0 rgb(0 0 0 / 0.10);
  color: rgb(var(--inset-text));
}

.sc-insetText { color: rgb(var(--inset-text)); }
.sc-insetMuted { color: rgb(var(--inset-muted)); }

.sc-inputClassic,
.sc-selectClassic {
  background: rgb(var(--inset-bg-1));
  border: 1px solid rgb(var(--inset-border) / 0.75);
  color: rgb(var(--inset-text));
}

.sc-inputClassic::placeholder { color: rgb(var(--inset-muted) / 0.65); }

.sc-inputClassic:focus,
.sc-selectClassic:focus {
  outline: none;
  border-color: rgb(var(--bar-red-bg-1) / 0.95);
  box-shadow: 0 0 0 2px rgb(var(--bar-red-bg-1) / 0.18);
}

.glow-cyan        { box-shadow: var(--shadow-glow-cyan); }
.glow-magenta     { box-shadow: var(--shadow-glow-magenta); }
.glow-cyan-hover:hover    { box-shadow: var(--shadow-glow-cyan); }
.glow-magenta-hover:hover { box-shadow: var(--shadow-glow-magenta); }

.shadow-glow-cyan    { box-shadow: var(--shadow-glow-cyan); }
.shadow-glow-magenta { box-shadow: var(--shadow-glow-magenta); }

.neon-border-magenta {
  border: 1px solid rgb(var(--magenta) / 0.35);
  box-shadow: var(--shadow-glow-magenta);
}

/* ---------- Gradient helpers ---------- */
.grad-sunset {
  background: linear-gradient(135deg, rgb(var(--magenta)) 0%, rgb(var(--violet)) 55%, rgb(var(--surface-1)) 100%);
}
.grad-cyan-pop {
  background: linear-gradient(135deg, rgb(var(--cyan)) 0%, rgb(var(--lav)) 55%, rgb(var(--magenta)) 100%);
}

/* ---------- Retro grid – appears only when synthwave theme is active ---------- */
[data-theme='synthwave'] .retro-grid {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  height: 40vh;
  background-image:
    linear-gradient(transparent 0%, rgba(149, 42, 153, 0.2) 100%),
    linear-gradient(90deg, transparent 0%, rgba(149, 42, 153, 0.1) 50%, transparent 100%),
    linear-gradient(to right, rgba(149, 42, 153, 0.1) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(149, 42, 153, 0.1) 1px, transparent 1px);
  background-size: 100% 100%, 100% 100%, 40px 40px, 40px 40px;
  transform: perspective(500px) rotateX(60deg);
  transform-origin: bottom;
  z-index: -1;
  pointer-events: none;
}

/* Hide retro-grid for all other themes */
:root .retro-grid { display: none; }
[data-theme='synthwave'] .retro-grid { display: block; }

/* ---------- Scrollbar ---------- */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: rgb(var(--bg-deep)); }
::-webkit-scrollbar-thumb { background: rgb(var(--border)); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: rgb(var(--cyan)); }
