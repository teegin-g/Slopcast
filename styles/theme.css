/* ==========================================================================
   Theme CSS — single source of truth for CSS custom properties + helpers.
   Every colour is stored as space-separated R G B channels so that Tailwind's
   opacity modifier syntax (bg-theme-bg/60) works correctly.
   
   Usage from Tailwind config:
     bg: 'rgb(var(--bg-deep) / <alpha-value>)'
   ========================================================================== */

/* ---------- Default: Slate ---------- */
:root {
  --bg-deep: 15 23 42;
  /* #0f172a */
  --bg-space: 27 41 62;
  /* #1B293E */
  --surface-1: 30 41 59;
  /* #1e293b */
  --surface-2: 51 65 85;
  /* #334155 */
  --border: 71 85 105;
  /* #475569 */
  --cyan: 59 130 246;
  /* #3b82f6 */
  --magenta: 236 72 153;
  /* #ec4899 */
  --violet: 139 92 246;
  /* #8b5cf6 */
  --purple: 30 27 75;
  /* #1e1b4b */
  --lav: 216 180 254;
  /* #d8b4fe */
  --text: 241 245 249;
  /* #f1f5f9 */
  --muted: 148 163 184;
  /* #94a3b8 */
  --success: 16 185 129;
  /* #10b981 */
  --warning: 245 158 11;
  /* #f59e0b */
  --danger: 239 68 68;
  /* #ef4444 */

  --shadow-glow-cyan: 0 0 10px rgba(59, 130, 246, 0.3);
  --shadow-glow-magenta: 0 0 10px rgba(236, 72, 153, 0.3);
  --shadow-card: 0 10px 30px rgba(0, 0, 0, .45);

  --grad-space:
    radial-gradient(1200px circle at 10% -20%, rgba(59, 130, 246, 0.26) 0%, rgba(59, 130, 246, 0) 58%),
    radial-gradient(980px circle at 92% -8%, rgba(99, 102, 241, 0.20) 0%, rgba(99, 102, 241, 0) 54%),
    linear-gradient(160deg, #19273d 0%, #0f172a 58%, #0a1323 100%);
  --font-brand: 'Inter';
  --ambient-left: 59 130 246;
  --ambient-right: 71 85 105;
  --ambient-left-alpha: 0.26;
  --ambient-right-alpha: 0.16;
  --ambient-orb-left-alpha: 0.12;
  --ambient-orb-right-alpha: 0.14;

  /* ==========================================================================
     Semantic chrome tokens (defaults map to base tokens)
     ========================================================================== */

  /* Header bar */
  --header-bg-1: var(--surface-2);
  --header-bg-2: var(--surface-1);
  --header-border: var(--border);
  --header-text: var(--text);

  /* Common titlebar presets (overridable per-theme) */
  --bar-neutral-bg-1: var(--surface-2);
  --bar-neutral-bg-2: var(--surface-1);
  --bar-neutral-text: var(--text);
  --bar-neutral-border: var(--border);

  --bar-red-bg-1: var(--magenta);
  --bar-red-bg-2: var(--magenta);
  --bar-red-text: var(--text);
  --bar-red-border: var(--border);

  --bar-yellow-bg-1: var(--warning);
  --bar-yellow-bg-2: var(--warning);
  --bar-yellow-text: var(--bg-deep);
  --bar-yellow-border: var(--border);

  --bar-blue-bg-1: var(--cyan);
  --bar-blue-bg-2: var(--cyan);
  --bar-blue-text: var(--bg-deep);
  --bar-blue-border: var(--border);

  --bar-brown-bg-1: var(--surface-2);
  --bar-brown-bg-2: var(--surface-1);
  --bar-brown-text: var(--text);
  --bar-brown-border: var(--border);

  --bar-dark-bg-1: var(--bg-deep);
  --bar-dark-bg-2: var(--bg-deep);
  --bar-dark-text: var(--text);
  --bar-dark-border: var(--border);

  /* Brown-style module panels (sidebar / memo) */
  --panel-bg-1: var(--surface-1);
  --panel-bg-2: var(--surface-1);
  --panel-border: var(--border);
  --panel-inset-hi: 255 255 255;
  --panel-inset-lo: 0 0 0;
  --panel-title-bg-1: var(--surface-2);
  --panel-title-bg-2: var(--surface-1);
  --panel-title-text: var(--text);

  /* Dark “screen” panels (map / charts) */
  --screen-bg-1: var(--bg-deep);
  --screen-bg-2: var(--bg-deep);
  --screen-border: var(--border);
  --screen-inset-hi: 255 255 255;
  --screen-inset-lo: 0 0 0;
  --screen-title-bg-1: var(--surface-2);
  --screen-title-bg-2: var(--surface-1);
  --screen-title-text: var(--text);

  /* KPI blocks (big + tiles) */
  --kpi-bg-1: var(--surface-1);
  --kpi-bg-2: var(--surface-2);
  --kpi-border: var(--border);
  --kpi-title-bg-1: var(--surface-2);
  --kpi-title-bg-2: var(--surface-1);
  --kpi-title-text: var(--text);
  --kpi-value-text: var(--text);

  /* KPI variants (fallback to base KPI tokens) */
  --kpi-main-bg-1: var(--kpi-bg-1);
  --kpi-main-bg-2: var(--kpi-bg-2);
  --kpi-main-border: var(--kpi-border);
  --kpi-main-title-bg-1: var(--kpi-title-bg-1);
  --kpi-main-title-bg-2: var(--kpi-title-bg-2);
  --kpi-main-title-text: var(--kpi-title-text);
  --kpi-main-value-text: var(--kpi-value-text);

  --kpi-tile-bg-1: var(--kpi-bg-1);
  --kpi-tile-bg-2: var(--kpi-bg-2);
  --kpi-tile-border: var(--kpi-border);
  --kpi-tile-title-bg-1: var(--kpi-title-bg-1);
  --kpi-tile-title-bg-2: var(--kpi-title-bg-2);
  --kpi-tile-title-text: var(--kpi-title-text);
  --kpi-tile-value-text: var(--kpi-value-text);

  /* Buttons (embossed) */
  --btn-primary-bg-1: var(--cyan);
  --btn-primary-bg-2: var(--cyan);
  --btn-primary-border: var(--cyan);
  --btn-primary-text: var(--bg-deep);

  --btn-secondary-bg-1: var(--surface-2);
  --btn-secondary-bg-2: var(--surface-1);
  --btn-secondary-border: var(--border);
  --btn-secondary-text: var(--text);

  /* Radii */
  --radius-panel: 18px;
  --radius-kpi: 18px;

  /* Light inset surfaces (used by Scenario page Classic mode) */
  --inset-bg-1: 255 255 255;
  --inset-bg-2: 245 247 250;
  --inset-border: var(--border);
  --inset-text: var(--text);
  --inset-muted: var(--muted);
}

/* ---------- Synthwave ---------- */
[data-theme='synthwave'] {
  --bg-deep: 14 6 26;
  /* #0E061A */
  --bg-space: 27 14 43;
  /* #1B0E2B */
  --surface-1: 35 37 88;
  /* #232558 */
  --surface-2: 47 56 135;
  /* #2F3887 */
  --border: 96 83 160;
  /* #6053A0 */
  --cyan: 158 211 240;
  /* #9ED3F0 */
  --magenta: 229 102 218;
  /* #E566DA */
  --violet: 149 42 153;
  /* #952A99 */
  --purple: 84 25 99;
  /* #541963 */
  --lav: 219 161 221;
  /* #DBA1DD */
  --text: 235 233 238;
  /* #EBE9EE */
  --muted: 168 163 168;
  /* #A8A3A8 */
  --success: 45 255 177;
  /* #2DFFB1 */
  --warning: 255 184 107;
  /* #FFB86B */
  --danger: 255 79 163;
  /* #FF4FA3 */

  --shadow-glow-cyan: 0 0 18px rgba(158, 211, 240, .45), 0 0 48px rgba(158, 211, 240, .25);
  --shadow-glow-magenta: 0 0 18px rgba(229, 102, 218, .45), 0 0 48px rgba(229, 102, 218, .25);
  --shadow-card: 0 10px 30px rgba(0, 0, 0, .55);

  --grad-space:
    radial-gradient(1000px circle at 14% -20%, rgba(229, 102, 218, 0.54) 0%, rgba(229, 102, 218, 0) 56%),
    radial-gradient(1080px circle at 92% -10%, rgba(158, 211, 240, 0.38) 0%, rgba(158, 211, 240, 0) 58%),
    linear-gradient(168deg, #1a0a2d 0%, #120722 50%, #090312 100%);
  --font-brand: 'Orbitron';
  --ambient-left: 229 102 218;
  --ambient-right: 158 211 240;
  --ambient-left-alpha: 0.42;
  --ambient-right-alpha: 0.34;
  --ambient-orb-left-alpha: 0.20;
  --ambient-orb-right-alpha: 0.20;
  --synth-sun: 255 184 107;
  --synth-grid-cyan: 158 211 240;
  --synth-ridge-dark: 8 3 18;
}

/* ---------- Tropical / Tommy Bahama ---------- */
[data-theme='tropical'] {
  --bg-deep: 18 28 40;
  /* dark ocean midnight */
  --bg-space: 26 35 50;
  /* deep lagoon */
  --surface-1: 30 50 60;
  /* driftwood dark */
  --surface-2: 42 72 82;
  /* wet palm bark */
  --border: 45 212 191;
  /* seafoam teal (accent border) */
  --cyan: 45 212 191;
  /* teal-400  – primary accent */
  --magenta: 185 255 59;
  /* neon lime – replaces coral/orange accents */
  --violet: 192 132 252;
  /* purple-400 */
  --purple: 30 58 48;
  /* deep palm shadow */
  --lav: 195 255 140;
  /* soft lime highlight (secondary text) */
  --text: 236 242 238;
  /* off-white sea-foam */
  --muted: 148 180 170;
  /* faded palm green */
  --success: 52 211 153;
  /* emerald-400 */
  --warning: 185 255 59;
  /* neon lime – used for tropical highlights */
  --danger: 248 113 113;
  /* red-400 */

  --shadow-glow-cyan: 0 0 14px rgba(45, 212, 191, 0.35), 0 0 40px rgba(45, 212, 191, 0.15);
  --shadow-glow-magenta: 0 0 14px rgba(185, 255, 59, 0.42), 0 0 46px rgba(185, 255, 59, 0.20);
  --shadow-card: 0 10px 30px rgba(0, 0, 0, .45);

  --grad-space:
    radial-gradient(1040px circle at 12% -18%, rgba(45, 212, 191, 0.34) 0%, rgba(45, 212, 191, 0) 58%),
    radial-gradient(980px circle at 92% -10%, rgba(185, 255, 59, 0.24) 0%, rgba(185, 255, 59, 0) 56%),
    linear-gradient(162deg, #1b3140 0%, #142636 52%, #0f1c2b 100%);
  --font-brand: 'Inter';
  --ambient-left: 45 212 191;
  --ambient-right: 185 255 59;
  --ambient-left-alpha: 0.32;
  --ambient-right-alpha: 0.24;
  --ambient-orb-left-alpha: 0.15;
  --ambient-orb-right-alpha: 0.12;
  --tropical-sun: 255 197 124;
  --tropical-horizon-coral: 185 255 59;
  --tropical-lagoon: 45 212 191;
  --tropical-ridge-dark: 9 23 31;
  --tropical-palm-shadow: 16 42 44;
}

/* ---------- Nocturne (Moonlit Alpine) ---------- */
[data-theme='league'] {
  --bg-deep: 3 8 16;
  /* #030810 */
  --bg-space: 8 16 32;
  /* #081020 */
  --surface-1: 14 26 48;
  /* #0E1A30 */
  --surface-2: 24 38 66;
  /* #182642 */
  --border: 76 104 145;
  /* #4C6891 */
  --cyan: 103 195 238;
  /* #67C3EE */
  --magenta: 220 129 96;
  /* #DC8160 */
  --violet: 95 136 184;
  /* #5F88B8 */
  --purple: 10 18 34;
  /* #0A1222 */
  --lav: 168 191 225;
  /* #A8BFE1 */
  --text: 236 242 252;
  /* #ECF2FC */
  --muted: 144 162 191;
  /* #90A2BF */
  --success: 116 176 145;
  /* #74B091 */
  --warning: 233 176 103;
  /* #E9B067 */
  --danger: 206 103 87;
  /* #CE6757 */

  --shadow-glow-cyan: 0 0 14px rgba(103, 195, 238, 0.24), 0 0 32px rgba(103, 195, 238, 0.10);
  --shadow-glow-magenta: 0 0 12px rgba(220, 129, 96, 0.20), 0 0 28px rgba(220, 129, 96, 0.08);
  --shadow-card: 0 14px 32px rgba(0, 0, 0, 0.52);

  --grad-space:
    radial-gradient(1060px circle at 14% -22%, rgba(103, 195, 238, 0.30) 0%, rgba(103, 195, 238, 0) 58%),
    radial-gradient(900px circle at 88% -8%, rgba(233, 176, 103, 0.23) 0%, rgba(233, 176, 103, 0) 56%),
    linear-gradient(170deg, #0b1830 0%, #071020 52%, #030810 100%);
  --font-brand: 'Inter';
  --ambient-left: 103 195 238;
  --ambient-right: 233 176 103;
  --ambient-left-alpha: 0.30;
  --ambient-right-alpha: 0.24;
  --ambient-orb-left-alpha: 0.12;
  --ambient-orb-right-alpha: 0.12;
  --nocturne-moon: 242 208 156;
  --nocturne-horizon-amber: 229 142 75;
  --nocturne-aurora-cyan: 88 166 222;
  --nocturne-ridge-dark: 4 8 16;

  /* Semantic chrome tweaks for cinematic contrast */
  --header-bg-1: 34 62 98;
  /* #223E62 */
  --header-bg-2: 12 23 40;
  /* #0C1728 */
  --header-border: 3 9 18;
  /* #030912 */
  --header-text: 241 246 255;

  --bar-neutral-bg-1: 31 52 82;
  /* #1F3452 */
  --bar-neutral-bg-2: 15 27 46;
  /* #0F1B2E */
  --bar-neutral-text: 241 246 255;
  --bar-neutral-border: 6 15 29;
  /* #060F1D */

  --bar-blue-bg-1: 103 195 238;
  --bar-blue-bg-2: 71 148 194;
  --bar-blue-text: 8 17 33;
  --bar-blue-border: 21 54 85;

  --bar-yellow-bg-1: 233 176 103;
  --bar-yellow-bg-2: 190 131 69;
  --bar-yellow-text: 34 22 8;
  --bar-yellow-border: 96 61 22;

  --btn-primary-bg-1: var(--cyan);
  --btn-primary-bg-2: 71 148 194;
  --btn-primary-border: 31 76 119;
  --btn-primary-text: 8 17 33;
}

/* ---------- Stormwatch (Dusk Front) ---------- */
[data-theme='stormwatch'] {
  --bg-deep: 7 11 22;
  /* #070B16 */
  --bg-space: 16 26 44;
  /* #101A2C */
  --surface-1: 20 33 56;
  /* #142138 */
  --surface-2: 33 52 82;
  /* #213452 */
  --border: 82 107 148;
  /* #526B94 */
  --cyan: 155 196 255;
  /* #9BC4FF */
  --magenta: 242 166 90;
  /* #F2A65A */
  --violet: 116 145 191;
  /* #7491BF */
  --purple: 12 18 33;
  /* #0C1221 */
  --lav: 199 216 255;
  /* #C7D8FF */
  --text: 233 240 255;
  /* #E9F0FF */
  --muted: 159 177 211;
  /* #9FB1D3 */
  --success: 108 194 151;
  /* #6CC297 */
  --warning: 247 195 107;
  /* #F7C36B */
  --danger: 216 107 91;
  /* #D86B5B */

  --shadow-glow-cyan: 0 0 16px rgba(155, 196, 255, 0.28), 0 0 40px rgba(155, 196, 255, 0.12);
  --shadow-glow-magenta: 0 0 12px rgba(242, 166, 90, 0.26), 0 0 32px rgba(242, 166, 90, 0.10);
  --shadow-card: 0 14px 32px rgba(0, 0, 0, 0.56);

  --grad-space:
    radial-gradient(1080px circle at 10% -20%, rgba(144, 173, 219, 0.30) 0%, rgba(144, 173, 219, 0) 58%),
    radial-gradient(980px circle at 90% -12%, rgba(247, 166, 102, 0.24) 0%, rgba(247, 166, 102, 0) 56%),
    linear-gradient(170deg, #1a2842 0%, #101a2d 54%, #070b16 100%);
  --font-brand: 'Inter';
  --ambient-left: 126 161 216;
  --ambient-right: 247 166 102;
  --ambient-left-alpha: 0.32;
  --ambient-right-alpha: 0.24;
  --ambient-orb-left-alpha: 0.14;
  --ambient-orb-right-alpha: 0.12;
  --storm-cloud: 44 62 92;
  --storm-rain: 142 173 219;
  --storm-lamp: 252 214 140;
  --storm-horizon-ember: 247 166 102;
  --storm-ridge-dark: 5 9 18;

  --header-bg-1: 44 63 94;
  /* #2C3F5E */
  --header-bg-2: 19 30 48;
  /* #131E30 */
  --header-border: 6 11 21;
  /* #060B15 */
  --header-text: 242 246 255;

  --bar-neutral-bg-1: 36 55 86;
  /* #243756 */
  --bar-neutral-bg-2: 18 31 50;
  /* #121F32 */
  --bar-neutral-text: 242 246 255;
  --bar-neutral-border: 8 16 31;
  /* #08101F */

  --bar-blue-bg-1: 155 196 255;
  --bar-blue-bg-2: 108 147 205;
  --bar-blue-text: 11 18 33;
  --bar-blue-border: 30 60 103;

  --bar-yellow-bg-1: 247 195 107;
  --bar-yellow-bg-2: 192 140 73;
  --bar-yellow-text: 38 24 9;
  --bar-yellow-border: 96 61 24;

  --btn-primary-bg-1: var(--cyan);
  --btn-primary-bg-2: 108 147 205;
  --btn-primary-border: 33 74 124;
  --btn-primary-text: 11 18 33;
}

/* ---------- Mario (Slopcast Classic) ---------- */
[data-theme='mario'] {
  /* Light canvas behind the modules */
  --bg-deep: 243 239 233;
  /* #F3EFE9 */
  --bg-space: 251 249 246;
  /* #FBF9F6 */

  /* Core surfaces (most UI is dark modules) */
  --surface-1: 15 29 48;
  /* #0F1D30 (navy) */
  --surface-2: 21 41 68;
  /* #152944 (navy lift) */
  --border: 201 177 139;
  /* #C9B18B (sand) */

  /* Accents */
  --cyan: 18 112 255;
  /* #1270FF (classic blue) */
  --magenta: 220 0 0;
  /* #DC0000 (classic red) */
  --violet: 255 122 0;
  /* orange pop */
  --purple: 15 29 48;
  /* navy (avoid dominant brown) */
  --lav: 255 213 0;
  /* #FFD500 (gold) */

  /* Text */
  --text: 255 255 255;
  /* white on modules */
  --muted: 233 223 205;
  /* warm sand */

  /* States */
  --success: 56 150 36;
  /* green KPI fill */
  --warning: 255 213 0;
  /* yellow title bars */
  --danger: 220 0 0;
  /* red title bars */

  /* Shadows (no neon in classic theme) */
  --shadow-glow-cyan: 0 0 0 rgba(0, 0, 0, 0);
  --shadow-glow-magenta: 0 0 0 rgba(0, 0, 0, 0);
  --shadow-card: 0 6px 12px rgba(0, 0, 0, 0.35);

  --grad-space:
    url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20width%3D'180'%20height%3D'180'%20viewBox%3D'0%200%20180%20180'%3E%3Crect%20width%3D'180'%20height%3D'180'%20fill%3D'none'%2F%3E%3Cg%3E%3Crect%20x%3D'16'%20y%3D'96'%20width%3D'28'%20height%3D'62'%20fill%3D'%233aa548'%20fill-opacity%3D'0.16'%20stroke%3D'%231f6d2b'%20stroke-opacity%3D'0.24'%2F%3E%3Crect%20x%3D'10'%20y%3D'84'%20width%3D'40'%20height%3D'14'%20fill%3D'%2357bf63'%20fill-opacity%3D'0.18'%20stroke%3D'%232a7f39'%20stroke-opacity%3D'0.22'%2F%3E%3Crect%20x%3D'126'%20y%3D'118'%20width%3D'24'%20height%3D'40'%20fill%3D'%233aa548'%20fill-opacity%3D'0.13'%20stroke%3D'%231f6d2b'%20stroke-opacity%3D'0.2'%2F%3E%3Crect%20x%3D'121'%20y%3D'108'%20width%3D'34'%20height%3D'12'%20fill%3D'%2357bf63'%20fill-opacity%3D'0.16'%20stroke%3D'%232a7f39'%20stroke-opacity%3D'0.2'%2F%3E%3Cellipse%20cx%3D'102'%20cy%3D'58'%20rx%3D'28'%20ry%3D'17'%20fill%3D'%23d12b2b'%20fill-opacity%3D'0.13'%20stroke%3D'%23960000'%20stroke-opacity%3D'0.18'%2F%3E%3Crect%20x%3D'92'%20y%3D'60'%20width%3D'20'%20height%3D'24'%20rx%3D'6'%20fill%3D'%23fff4db'%20fill-opacity%3D'0.18'%20stroke%3D'%23d8c6a1'%20stroke-opacity%3D'0.2'%2F%3E%3Ccircle%20cx%3D'90'%20cy%3D'56'%20r%3D'4.5'%20fill%3D'%23fffdf7'%20fill-opacity%3D'0.45'%2F%3E%3Ccircle%20cx%3D'103'%20cy%3D'52'%20r%3D'5'%20fill%3D'%23fffdf7'%20fill-opacity%3D'0.45'%2F%3E%3Ccircle%20cx%3D'116'%20cy%3D'58'%20r%3D'4.3'%20fill%3D'%23fffdf7'%20fill-opacity%3D'0.45'%2F%3E%3Crect%20x%3D'134'%20y%3D'30'%20width%3D'18'%20height%3D'18'%20rx%3D'2'%20fill%3D'%23f2c300'%20fill-opacity%3D'0.15'%20stroke%3D'%23ad7b00'%20stroke-opacity%3D'0.18'%2F%3E%3Crect%20x%3D'140'%20y%3D'36'%20width%3D'6'%20height%3D'6'%20rx%3D'1'%20fill%3D'%23a06f00'%20fill-opacity%3D'0.22'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E"),
    radial-gradient(900px circle at 10% -16%, rgba(18, 112, 255, 0.18) 0%, rgba(18, 112, 255, 0) 56%),
    radial-gradient(840px circle at 90% -18%, rgba(220, 0, 0, 0.14) 0%, rgba(220, 0, 0, 0) 54%),
    linear-gradient(180deg, #fff6e1 0%, #f3efe9 56%, #e4dccf 100%);
  --font-brand: 'Inter';
  --ambient-left: 18 112 255;
  --ambient-right: 220 0 0;
  --ambient-left-alpha: 0.18;
  --ambient-right-alpha: 0.14;
  --ambient-orb-left-alpha: 0.10;
  --ambient-orb-right-alpha: 0.10;

  /* Header chrome (blue) */
  --header-bg-1: 18 112 255;
  /* #1270FF */
  --header-bg-2: 8 56 158;
  /* #08389E */
  --header-border: 3 18 54;
  /* #031236 */
  --header-text: 255 255 255;

  /* Titlebar presets (match screenshot) */
  --bar-red-bg-1: 220 0 0;
  /* #DC0000 */
  --bar-red-bg-2: 150 0 0;
  /* #960000 */
  --bar-red-text: 255 255 255;
  --bar-red-border: 58 0 0;
  /* #3A0000 */

  --bar-yellow-bg-1: 255 213 0;
  /* #FFD500 */
  --bar-yellow-bg-2: 216 160 0;
  /* #D8A000 */
  --bar-yellow-text: 34 24 10;
  /* #22180A */
  --bar-yellow-border: 120 70 0;
  /* #784600 */

  --bar-blue-bg-1: 23 105 235;
  /* #1769EB */
  --bar-blue-bg-2: 8 56 158;
  /* #08389E */
  --bar-blue-text: 255 255 255;
  --bar-blue-border: 3 18 54;

  /* Neutral module chrome (replaces old "brown" dominance). */
  --bar-neutral-bg-1: 21 41 68;
  /* #152944 */
  --bar-neutral-bg-2: 15 29 48;
  /* #0F1D30 */
  --bar-neutral-text: 255 255 255;
  --bar-neutral-border: 7 18 33;
  /* #071221 */

  /* Back-compat: anything still using --bar-brown maps to neutral. */
  --bar-brown-bg-1: var(--bar-neutral-bg-1);
  --bar-brown-bg-2: var(--bar-neutral-bg-2);
  --bar-brown-text: var(--bar-neutral-text);
  --bar-brown-border: var(--bar-neutral-border);

  --bar-dark-bg-1: 24 24 24;
  /* #181818 */
  --bar-dark-bg-2: 10 10 10;
  /* #0A0A0A */
  --bar-dark-text: 255 255 255;
  --bar-dark-border: 60 60 60;
  /* #3C3C3C */

  /* Module panels */
  --panel-bg-1: var(--surface-2);
  --panel-bg-2: var(--surface-1);
  --panel-border: var(--border);
  --panel-inset-hi: 255 210 155;
  --panel-inset-lo: 0 0 0;
  --panel-title-bg-1: var(--bar-neutral-bg-1);
  --panel-title-bg-2: var(--bar-neutral-bg-2);
  --panel-title-text: 255 255 255;

  /* Dark “screens” (map / charts) */
  --screen-bg-1: 26 26 26;
  /* #1A1A1A */
  --screen-bg-2: 10 10 10;
  /* #0A0A0A */
  --screen-border: 76 76 76;
  /* #4C4C4C */
  --screen-inset-hi: 255 255 255;
  --screen-inset-lo: 0 0 0;
  --screen-title-bg-1: var(--bar-neutral-bg-1);
  --screen-title-bg-2: var(--bar-neutral-bg-2);
  --screen-title-text: 255 255 255;

  /* KPI styling */
  --kpi-bg-1: 56 150 36;
  --kpi-bg-2: 34 120 22;
  --kpi-border: var(--border);
  --kpi-title-bg-1: var(--bar-yellow-bg-1);
  --kpi-title-bg-2: var(--bar-yellow-bg-2);
  --kpi-title-text: var(--bar-yellow-text);
  --kpi-value-text: 255 255 255;

  /* KPI main (big NPV card) */
  --kpi-main-bg-1: 56 150 36;
  --kpi-main-bg-2: 34 120 22;
  --kpi-main-border: var(--border);
  --kpi-main-title-bg-1: var(--bar-red-bg-1);
  --kpi-main-title-bg-2: var(--bar-red-bg-2);
  --kpi-main-title-text: var(--bar-red-text);
  --kpi-main-value-text: 255 255 255;

  /* KPI tiles (smaller blocks) */
  --kpi-tile-bg-1: 56 150 36;
  --kpi-tile-bg-2: 34 120 22;
  --kpi-tile-border: var(--border);
  --kpi-tile-title-bg-1: var(--bar-yellow-bg-1);
  --kpi-tile-title-bg-2: var(--bar-yellow-bg-2);
  --kpi-tile-title-text: var(--bar-yellow-text);
  --kpi-tile-value-text: 255 255 255;

  /* Buttons */
  --btn-primary-bg-1: var(--bar-yellow-bg-1);
  --btn-primary-bg-2: var(--bar-yellow-bg-2);
  --btn-primary-border: var(--bar-red-bg-2);
  /* red outline like screenshot */
  --btn-primary-text: var(--bar-yellow-text);

  --btn-secondary-bg-1: 21 41 68;
  --btn-secondary-bg-2: 15 29 48;
  --btn-secondary-border: var(--border);
  --btn-secondary-text: 255 255 255;

  /* Tighter corners like the classic UI */
  --radius-panel: 8px;
  --radius-kpi: 8px;

  /* Light inset surfaces (cream UI for controls/tables) */
  --inset-bg-1: 255 251 242;
  /* #FFFBF2 */
  --inset-bg-2: 248 240 225;
  /* #F8F0E1 */
  --inset-border: var(--border);
  --inset-text: 20 30 42;
  /* slate ink */
  --inset-muted: 71 85 105;
  /* muted slate */
}

/* ---------- Hyperborea (Winter Village) ---------- */
[data-theme='hyperborea'] {
  --bg-deep: 11 19 32;
  /* #0B1320 */
  --bg-space: 22 35 56;
  /* #162338 */
  --surface-1: 32 52 80;
  /* #203450 */
  --surface-2: 44 67 101;
  /* #2C4365 */
  --border: 90 108 135;
  /* #5A6C87 */
  --cyan: 56 189 248;
  /* #38BDF8 */
  --magenta: 251 188 5;
  /* #FBBC05 window glow amber */
  --violet: 143 159 184;
  /* #8F9FB8 snow ground */
  --purple: 20 29 46;
  /* #141D2E village sil */
  --lav: 203 213 225;
  /* #CBD5E1 */
  --text: 241 245 249;
  /* #F1F5F9 */
  --muted: 148 163 184;
  /* #94A3B8 */
  --success: 52 211 153;
  /* #34D399 */
  --warning: 251 191 36;
  /* #FBBF24 */
  --danger: 248 113 113;
  /* #F87171 */

  --shadow-glow-cyan: 0 0 16px rgba(56, 189, 248, 0.28), 0 0 40px rgba(56, 189, 248, 0.12);
  --shadow-glow-magenta: 0 0 12px rgba(251, 188, 5, 0.26), 0 0 32px rgba(251, 188, 5, 0.10);
  --shadow-card: 0 14px 32px rgba(0, 0, 0, 0.56);

  --grad-space:
    radial-gradient(1080px circle at 10% -20%, rgba(56, 189, 248, 0.15) 0%, rgba(56, 189, 248, 0) 58%),
    radial-gradient(980px circle at 90% -12%, rgba(251, 188, 5, 0.1) 0%, rgba(251, 188, 5, 0) 56%),
    linear-gradient(170deg, #162338 0%, #0b1320 100%);
  --font-brand: 'Inter';
  --ambient-left: 56 189 248;
  --ambient-right: 251 188 5;
  --ambient-left-alpha: 0.15;
  --ambient-right-alpha: 0.15;
  --ambient-orb-left-alpha: 0.1;
  --ambient-orb-right-alpha: 0.1;
  --hyperborea-cloud: 28 46 72;
  --hyperborea-ridge: 11 19 32;

  --header-bg-1: 32 52 80;
  --header-bg-2: 22 35 56;
  --header-border: 11 19 32;
  --header-text: 241 245 249;

  --bar-neutral-bg-1: 44 67 101;
  --bar-neutral-bg-2: 32 52 80;
  --bar-neutral-text: 241 245 249;
  --bar-neutral-border: 22 35 56;

  --bar-blue-bg-1: 56 189 248;
  --bar-blue-bg-2: 14 165 233;
  --bar-blue-text: 11 19 32;
  --bar-blue-border: 22 35 56;

  --bar-yellow-bg-1: 251 188 5;
  --bar-yellow-bg-2: 245 158 11;
  --bar-yellow-text: 11 19 32;
  --bar-yellow-border: 22 35 56;

  --btn-primary-bg-1: var(--cyan);
  --btn-primary-bg-2: 14 165 233;
  --btn-primary-border: 2 132 199;
  --btn-primary-text: 11 19 32;
}

/* ==========================================================================
   Global base styles
   ========================================================================== */

body {
  font-family: 'Inter', sans-serif;
  background: var(--grad-space);
  color: rgb(var(--text));
  margin: 0;
  transition: background 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 100vh;
}

.theme-atmo {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

[data-theme='synthwave'] .theme-atmo::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(68px 68px at 52% 10%, rgb(var(--synth-sun) / 0.78) 0%, rgb(var(--synth-sun) / 0) 72%),
    linear-gradient(180deg, rgb(var(--magenta) / 0.20) 0%, rgb(var(--violet) / 0.10) 35%, transparent 58%),
    linear-gradient(180deg, transparent 58%, rgb(var(--synth-grid-cyan) / 0.14) 69%, transparent 78%);
  opacity: 0.76;
  z-index: 0;
}

[data-theme='synthwave'] .theme-atmo.fx-max::before {
  background:
    radial-gradient(72px 72px at 52% 10%, rgb(var(--synth-sun) / 0.9) 0%, rgb(var(--synth-sun) / 0) 74%),
    linear-gradient(180deg, rgb(var(--magenta) / 0.28) 0%, rgb(var(--violet) / 0.18) 34%, transparent 58%),
    linear-gradient(180deg, transparent 52%, rgb(var(--magenta) / 0.26) 63%, transparent 78%),
    linear-gradient(180deg, transparent 58%, rgb(var(--synth-grid-cyan) / 0.24) 69%, transparent 80%);
  opacity: 0.98;
  filter: saturate(1.35) contrast(1.08);
}

.theme-atmo-header {
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

[data-theme='synthwave'] .theme-atmo-header {
  border-bottom-color: rgb(var(--border) / 0.95);
  box-shadow:
    inset 0 -1px 0 rgb(var(--cyan) / 0.35),
    0 12px 30px rgba(0, 0, 0, 0.42);
}

[data-theme='synthwave'] .theme-atmo-header.fx-max {
  box-shadow:
    inset 0 -1px 0 rgb(var(--magenta) / 0.52),
    0 16px 36px rgba(0, 0, 0, 0.54);
}

.theme-atmo-bands,
.theme-atmo-canopy,
.theme-atmo-horizon,
.theme-atmo-ridges,
.theme-atmo-palms {
  position: absolute;
  pointer-events: none;
}

[data-theme='synthwave'] .theme-atmo-bands {
  inset: 0;
  background:
    repeating-linear-gradient(178deg,
      rgb(var(--cyan) / 0.20) 0,
      rgb(var(--cyan) / 0.20) 1px,
      transparent 1px,
      transparent 13px),
    repeating-linear-gradient(3deg,
      rgb(var(--magenta) / 0.14) 0,
      rgb(var(--magenta) / 0.14) 1px,
      transparent 1px,
      transparent 19px);
  mix-blend-mode: screen;
  opacity: 0.34;
}

[data-theme='synthwave'] .theme-atmo-bands.fx-max {
  background:
    repeating-linear-gradient(178deg,
      rgb(var(--cyan) / 0.30) 0,
      rgb(var(--cyan) / 0.30) 1px,
      transparent 1px,
      transparent 9px),
    repeating-linear-gradient(3deg,
      rgb(var(--magenta) / 0.22) 0,
      rgb(var(--magenta) / 0.22) 1px,
      transparent 1px,
      transparent 14px);
  opacity: 0.74;
}

[data-theme='synthwave'] .theme-atmo-horizon {
  left: 0;
  right: 0;
  bottom: 0;
  height: 4.4rem;
  background:
    linear-gradient(180deg,
      rgb(var(--synth-sun) / 0) 0%,
      rgb(var(--synth-sun) / 0.20) 48%,
      rgb(var(--synth-sun) / 0.40) 62%,
      rgb(var(--synth-sun) / 0.02) 100%),
    linear-gradient(90deg, rgb(var(--magenta) / 0.26) 0%, rgb(var(--cyan) / 0.28) 50%, rgb(var(--magenta) / 0.24) 100%);
  opacity: 0.75;
}

[data-theme='synthwave'] .theme-atmo-horizon.fx-max {
  height: 6.8rem;
  background:
    linear-gradient(180deg,
      rgb(var(--synth-sun) / 0) 0%,
      rgb(var(--synth-sun) / 0.24) 42%,
      rgb(var(--synth-sun) / 0.54) 62%,
      rgb(var(--magenta) / 0.22) 80%,
      rgb(var(--magenta) / 0) 100%),
    linear-gradient(90deg, rgb(var(--magenta) / 0.38) 0%, rgb(var(--cyan) / 0.46) 50%, rgb(var(--magenta) / 0.36) 100%);
  opacity: 0.98;
}

[data-theme='synthwave'] .theme-atmo-ridges {
  left: 0;
  right: 0;
  bottom: 0;
  height: 6rem;
  background:
    linear-gradient(166deg, rgb(var(--synth-ridge-dark) / 0.96) 14%, rgb(var(--synth-ridge-dark) / 0.28) 62%, rgb(var(--synth-ridge-dark) / 0) 100%),
    linear-gradient(16deg, rgb(var(--synth-ridge-dark) / 0.86) 20%, rgb(var(--synth-ridge-dark) / 0.06) 74%, rgb(var(--synth-ridge-dark) / 0) 100%);
  opacity: 0.84;
}

[data-theme='synthwave'] .theme-atmo-ridges.fx-max {
  height: 8.5rem;
  opacity: 1;
}

[data-theme='tropical'] .theme-atmo::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(86px 86px at 56% 10%, rgb(var(--tropical-sun) / 0.64) 0%, rgb(var(--tropical-sun) / 0) 72%),
    linear-gradient(72deg, transparent 10.8%, rgb(var(--tropical-ridge-dark) / 0.24) 12.2%, rgb(var(--tropical-ridge-dark) / 0.24) 13.2%, transparent 14.6%),
    linear-gradient(-72deg, transparent 85.4%, rgb(var(--tropical-ridge-dark) / 0.24) 86.8%, rgb(var(--tropical-ridge-dark) / 0.24) 87.8%, transparent 89.2%),
    radial-gradient(200px 116px at 8% 100%, rgb(var(--tropical-palm-shadow) / 0.32) 0%, rgb(var(--tropical-palm-shadow) / 0.08) 58%, transparent 76%),
    radial-gradient(190px 112px at 92% 100%, rgb(var(--tropical-palm-shadow) / 0.32) 0%, rgb(var(--tropical-palm-shadow) / 0.08) 58%, transparent 76%),
    linear-gradient(180deg,
      rgb(var(--tropical-lagoon) / 0.24) 0%,
      rgb(var(--tropical-lagoon) / 0.08) 42%,
      rgb(var(--tropical-horizon-coral) / 0.18) 62%,
      transparent 82%);
  opacity: 0.74;
  z-index: 0;
}

[data-theme='tropical'] .theme-atmo.fx-max::before {
  background:
    radial-gradient(98px 98px at 56% 10%, rgb(var(--tropical-sun) / 0.78) 0%, rgb(var(--tropical-sun) / 0) 74%),
    repeating-conic-gradient(from 208deg at 8% 102%,
      rgb(var(--tropical-lagoon) / 0.24) 0deg 9deg,
      transparent 9deg 18deg),
    repeating-conic-gradient(from -28deg at 92% 102%,
      rgb(var(--tropical-lagoon) / 0.24) 0deg 9deg,
      transparent 9deg 18deg),
    linear-gradient(72deg, transparent 10.4%, rgb(var(--tropical-ridge-dark) / 0.36) 11.9%, rgb(var(--tropical-ridge-dark) / 0.36) 13.1%, transparent 14.6%),
    linear-gradient(-72deg, transparent 85.4%, rgb(var(--tropical-ridge-dark) / 0.36) 86.9%, rgb(var(--tropical-ridge-dark) / 0.36) 88.0%, transparent 89.5%),
    radial-gradient(220px 128px at 8% 100%, rgb(var(--tropical-palm-shadow) / 0.44) 0%, rgb(var(--tropical-palm-shadow) / 0.12) 60%, transparent 78%),
    radial-gradient(208px 122px at 92% 100%, rgb(var(--tropical-palm-shadow) / 0.44) 0%, rgb(var(--tropical-palm-shadow) / 0.12) 60%, transparent 78%),
    linear-gradient(180deg,
      rgb(var(--tropical-lagoon) / 0.34) 0%,
      rgb(var(--tropical-lagoon) / 0.14) 36%,
      rgb(var(--tropical-horizon-coral) / 0.26) 56%,
      rgb(var(--tropical-horizon-coral) / 0.08) 74%,
      transparent 88%);
  opacity: 0.96;
  filter: saturate(1.24) contrast(1.06);
}

[data-theme='tropical'] .theme-atmo-header {
  border-bottom-color: rgb(var(--border) / 0.9);
  box-shadow:
    inset 0 -1px 0 rgb(var(--warning) / 0.25),
    0 10px 24px rgba(0, 0, 0, 0.3);
}

[data-theme='tropical'] .theme-atmo-header.fx-max {
  box-shadow:
    inset 0 -1px 0 rgb(var(--tropical-horizon-coral) / 0.42),
    0 14px 30px rgba(0, 0, 0, 0.38);
}

[data-theme='tropical'] .theme-atmo-bands {
  inset: 0;
  background:
    repeating-linear-gradient(176deg,
      rgb(var(--tropical-lagoon) / 0.14) 0,
      rgb(var(--tropical-lagoon) / 0.14) 1px,
      transparent 1px,
      transparent 16px);
  opacity: 0.24;
}

[data-theme='tropical'] .theme-atmo-canopy {
  inset: 0;
  background:
    radial-gradient(160px 70px at 8% -8%, rgb(var(--tropical-lagoon) / 0.32) 0%, rgb(var(--tropical-lagoon) / 0) 74%),
    radial-gradient(160px 70px at 92% -8%, rgb(var(--tropical-lagoon) / 0.32) 0%, rgb(var(--tropical-lagoon) / 0) 74%),
    repeating-conic-gradient(from 232deg at 8% -8%,
      rgb(var(--tropical-lagoon) / 0.22) 0deg 11deg,
      transparent 11deg 21deg),
    repeating-conic-gradient(from -52deg at 92% -8%,
      rgb(var(--tropical-lagoon) / 0.22) 0deg 11deg,
      transparent 11deg 21deg);
  opacity: 0.42;
  mix-blend-mode: screen;
}

[data-theme='tropical'] .theme-atmo-canopy.fx-max {
  background:
    radial-gradient(190px 82px at 8% -10%, rgb(var(--tropical-lagoon) / 0.42) 0%, rgb(var(--tropical-lagoon) / 0) 76%),
    radial-gradient(190px 82px at 92% -10%, rgb(var(--tropical-lagoon) / 0.42) 0%, rgb(var(--tropical-lagoon) / 0) 76%),
    repeating-conic-gradient(from 232deg at 8% -8%,
      rgb(var(--tropical-lagoon) / 0.34) 0deg 10deg,
      transparent 10deg 18deg),
    repeating-conic-gradient(from -52deg at 92% -8%,
      rgb(var(--tropical-lagoon) / 0.34) 0deg 10deg,
      transparent 10deg 18deg);
  opacity: 0.72;
}

[data-theme='tropical'] .theme-atmo-bands.fx-max {
  background:
    repeating-linear-gradient(176deg,
      rgb(var(--tropical-lagoon) / 0.22) 0,
      rgb(var(--tropical-lagoon) / 0.22) 1px,
      transparent 1px,
      transparent 11px),
    repeating-linear-gradient(4deg,
      rgb(var(--warning) / 0.16) 0,
      rgb(var(--warning) / 0.16) 1px,
      transparent 1px,
      transparent 17px);
  opacity: 0.58;
}

[data-theme='tropical'] .theme-atmo-horizon {
  left: 0;
  right: 0;
  bottom: 0;
  height: 4.6rem;
  background:
    linear-gradient(180deg,
      rgb(var(--tropical-horizon-coral) / 0) 0%,
      rgb(var(--tropical-horizon-coral) / 0.2) 46%,
      rgb(var(--tropical-horizon-coral) / 0.36) 62%,
      rgb(var(--tropical-horizon-coral) / 0.08) 100%),
    linear-gradient(90deg, rgb(var(--warning) / 0.28) 0%, rgb(var(--tropical-horizon-coral) / 0.34) 50%, rgb(var(--warning) / 0.28) 100%);
  opacity: 0.7;
}

[data-theme='tropical'] .theme-atmo-horizon.fx-max {
  height: 6.8rem;
  background:
    linear-gradient(180deg,
      rgb(var(--tropical-horizon-coral) / 0) 0%,
      rgb(var(--tropical-horizon-coral) / 0.24) 40%,
      rgb(var(--tropical-horizon-coral) / 0.54) 62%,
      rgb(var(--warning) / 0.2) 84%,
      rgb(var(--warning) / 0) 100%),
    linear-gradient(90deg, rgb(var(--warning) / 0.36) 0%, rgb(var(--tropical-horizon-coral) / 0.44) 50%, rgb(var(--warning) / 0.36) 100%);
  opacity: 0.98;
}

[data-theme='tropical'] .theme-atmo-ridges {
  left: 0;
  right: 0;
  bottom: 0;
  height: 5.8rem;
  background:
    linear-gradient(162deg, rgb(var(--tropical-ridge-dark) / 0.92) 20%, rgb(var(--tropical-ridge-dark) / 0.2) 64%, rgb(var(--tropical-ridge-dark) / 0) 100%),
    linear-gradient(28deg, rgb(var(--tropical-palm-shadow) / 0.8) 18%, rgb(var(--tropical-palm-shadow) / 0.08) 74%, rgb(var(--tropical-palm-shadow) / 0) 100%);
  opacity: 0.8;
}

[data-theme='tropical'] .theme-atmo-ridges.fx-max {
  height: 8rem;
  opacity: 0.98;
}

[data-theme='tropical'] .theme-atmo-palms {
  left: 0;
  right: 0;
  bottom: 0;
  height: 7.2rem;
  opacity: 0.82;
}

[data-theme='tropical'] .theme-atmo-palms::before,
[data-theme='tropical'] .theme-atmo-palms::after {
  content: '';
  position: absolute;
  bottom: -0.3rem;
  width: 9rem;
  height: 5.8rem;
}

[data-theme='tropical'] .theme-atmo-palms::before {
  left: 2.8rem;
  background:
    linear-gradient(76deg, transparent 46%, rgb(var(--tropical-ridge-dark) / 0.94) 49%, rgb(var(--tropical-ridge-dark) / 0.94) 52%, transparent 55%),
    radial-gradient(64% 30% at 62% 48%, rgb(var(--tropical-lagoon) / 0.34) 0%, transparent 74%),
    radial-gradient(62% 26% at 70% 35%, rgb(var(--tropical-lagoon) / 0.30) 0%, transparent 74%),
    radial-gradient(58% 24% at 52% 30%, rgb(var(--tropical-lagoon) / 0.28) 0%, transparent 74%),
    radial-gradient(56% 22% at 36% 38%, rgb(var(--tropical-lagoon) / 0.26) 0%, transparent 74%),
    radial-gradient(72% 48% at 50% 100%, rgb(var(--tropical-palm-shadow) / 0.84) 0%, rgb(var(--tropical-palm-shadow) / 0.2) 62%, transparent 78%);
  filter: drop-shadow(0 -2px 8px rgb(var(--tropical-lagoon) / 0.18));
}

[data-theme='tropical'] .theme-atmo-palms::after {
  right: 2.8rem;
  transform: scaleX(-1);
  background:
    linear-gradient(76deg, transparent 46%, rgb(var(--tropical-ridge-dark) / 0.94) 49%, rgb(var(--tropical-ridge-dark) / 0.94) 52%, transparent 55%),
    radial-gradient(64% 30% at 62% 48%, rgb(var(--tropical-lagoon) / 0.34) 0%, transparent 74%),
    radial-gradient(62% 26% at 70% 35%, rgb(var(--tropical-lagoon) / 0.30) 0%, transparent 74%),
    radial-gradient(58% 24% at 52% 30%, rgb(var(--tropical-lagoon) / 0.28) 0%, transparent 74%),
    radial-gradient(56% 22% at 36% 38%, rgb(var(--tropical-lagoon) / 0.26) 0%, transparent 74%),
    radial-gradient(72% 48% at 50% 100%, rgb(var(--tropical-palm-shadow) / 0.84) 0%, rgb(var(--tropical-palm-shadow) / 0.2) 62%, transparent 78%);
  filter: drop-shadow(0 -2px 8px rgb(var(--tropical-lagoon) / 0.18));
}

[data-theme='tropical'] .theme-atmo-palms.fx-max {
  height: 8.6rem;
  opacity: 0.98;
}

[data-theme='tropical'] .theme-atmo-palms.fx-max::before,
[data-theme='tropical'] .theme-atmo-palms.fx-max::after {
  width: 10rem;
  height: 6.4rem;
}

[data-theme='league'] .theme-atmo::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(44px 44px at 53% 7%, rgb(var(--nocturne-moon) / 0.82) 0%, rgb(var(--nocturne-moon) / 0) 72%),
    linear-gradient(180deg,
      rgb(var(--nocturne-horizon-amber) / 0.00) 56%,
      rgb(var(--nocturne-horizon-amber) / 0.30) 61%,
      rgb(var(--nocturne-horizon-amber) / 0.00) 68%),
    linear-gradient(180deg,
      rgb(var(--nocturne-aurora-cyan) / 0.16) 0%,
      rgb(var(--nocturne-aurora-cyan) / 0.06) 34%,
      transparent 58%);
  opacity: 0.82;
  z-index: 0;
}

[data-theme='league'] .theme-atmo-header {
  border-bottom-color: rgb(var(--border) / 0.92);
  box-shadow:
    inset 0 -1px 0 rgb(var(--warning) / 0.24),
    0 10px 28px rgba(0, 0, 0, 0.34);
}

[data-theme='league'] .theme-atmo-bands {
  inset: 0;
  background:
    radial-gradient(62px 62px at 54% 15%, rgb(var(--nocturne-moon) / 0.58) 0%, rgb(var(--nocturne-moon) / 0) 76%),
    repeating-linear-gradient(176deg,
      rgb(var(--nocturne-aurora-cyan) / 0.24) 0,
      rgb(var(--nocturne-aurora-cyan) / 0.24) 1px,
      transparent 1px,
      transparent 12px),
    linear-gradient(180deg,
      rgb(var(--nocturne-aurora-cyan) / 0.22) 0%,
      rgb(var(--nocturne-aurora-cyan) / 0.10) 36%,
      rgb(var(--nocturne-horizon-amber) / 0.22) 72%,
      rgb(var(--nocturne-horizon-amber) / 0) 100%);
  mix-blend-mode: screen;
  opacity: 0.36;
}

[data-theme='league'] .theme-atmo-ridges {
  left: 0;
  right: 0;
  bottom: 0;
  height: 5.25rem;
  background:
    linear-gradient(161deg, rgb(var(--nocturne-ridge-dark) / 0.92) 12%, rgb(var(--nocturne-ridge-dark) / 0.2) 62%, rgb(var(--nocturne-ridge-dark) / 0) 100%),
    linear-gradient(22deg, rgb(var(--nocturne-ridge-dark) / 0.84) 20%, rgb(var(--nocturne-ridge-dark) / 0.04) 70%, rgb(var(--nocturne-ridge-dark) / 0) 100%);
  opacity: 0.86;
}

[data-theme='stormwatch'] .theme-atmo::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(52px 52px at 16% 66%, rgb(var(--storm-lamp) / 0.58) 0%, rgb(var(--storm-lamp) / 0) 74%),
    radial-gradient(580px 220px at 18% 72%, rgb(var(--storm-horizon-ember) / 0.26) 0%, rgb(var(--storm-horizon-ember) / 0) 78%),
    linear-gradient(180deg,
      rgb(var(--storm-rain) / 0.14) 0%,
      rgb(var(--storm-rain) / 0.08) 30%,
      transparent 58%),
    linear-gradient(180deg,
      transparent 56%,
      rgb(var(--storm-horizon-ember) / 0.18) 62%,
      transparent 72%);
  opacity: 0.82;
  z-index: 0;
}

[data-theme='stormwatch'] .theme-atmo.fx-max::before {
  background:
    radial-gradient(62px 62px at 16% 66%, rgb(var(--storm-lamp) / 0.68) 0%, rgb(var(--storm-lamp) / 0) 76%),
    radial-gradient(720px 250px at 18% 72%, rgb(var(--storm-horizon-ember) / 0.34) 0%, rgb(var(--storm-horizon-ember) / 0) 80%),
    linear-gradient(180deg,
      rgb(var(--storm-rain) / 0.22) 0%,
      rgb(var(--storm-rain) / 0.10) 34%,
      transparent 62%),
    linear-gradient(180deg,
      transparent 52%,
      rgb(var(--storm-horizon-ember) / 0.28) 60%,
      rgb(var(--storm-horizon-ember) / 0.08) 74%,
      transparent 84%);
  opacity: 0.96;
}

[data-theme='stormwatch'] .theme-atmo-header {
  border-bottom-color: rgb(var(--border) / 0.9);
  box-shadow:
    inset 0 -1px 0 rgb(var(--warning) / 0.22),
    0 12px 30px rgba(0, 0, 0, 0.4);
}

[data-theme='stormwatch'] .theme-atmo-header.fx-max {
  box-shadow:
    inset 0 -1px 0 rgb(var(--storm-horizon-ember) / 0.42),
    0 16px 36px rgba(0, 0, 0, 0.48);
}

[data-theme='stormwatch'] .theme-atmo-bands {
  inset: 0;
  background:
    repeating-linear-gradient(166deg,
      rgb(var(--storm-rain) / 0.24) 0,
      rgb(var(--storm-rain) / 0.24) 1px,
      transparent 1px,
      transparent 11px),
    linear-gradient(180deg,
      rgb(var(--storm-cloud) / 0.20) 0%,
      rgb(var(--storm-cloud) / 0.08) 38%,
      rgb(var(--storm-horizon-ember) / 0.16) 72%,
      transparent 100%);
  mix-blend-mode: screen;
  opacity: 0.3;
}

[data-theme='stormwatch'] .theme-atmo-bands.fx-max {
  background:
    repeating-linear-gradient(166deg,
      rgb(var(--storm-rain) / 0.34) 0,
      rgb(var(--storm-rain) / 0.34) 1px,
      transparent 1px,
      transparent 8px),
    repeating-linear-gradient(14deg,
      rgb(var(--storm-rain) / 0.18) 0,
      rgb(var(--storm-rain) / 0.18) 1px,
      transparent 1px,
      transparent 14px),
    linear-gradient(180deg,
      rgb(var(--storm-cloud) / 0.28) 0%,
      rgb(var(--storm-cloud) / 0.10) 36%,
      rgb(var(--storm-horizon-ember) / 0.22) 72%,
      transparent 100%);
  opacity: 0.62;
}

[data-theme='stormwatch'] .theme-atmo-horizon {
  left: 0;
  right: 0;
  bottom: 0;
  height: 4.5rem;
  background:
    linear-gradient(180deg,
      rgb(var(--storm-horizon-ember) / 0) 0%,
      rgb(var(--storm-horizon-ember) / 0.22) 48%,
      rgb(var(--storm-horizon-ember) / 0.42) 66%,
      rgb(var(--storm-horizon-ember) / 0.04) 100%),
    linear-gradient(90deg, rgb(var(--storm-rain) / 0.20) 0%, rgb(var(--storm-horizon-ember) / 0.28) 40%, rgb(var(--storm-rain) / 0.24) 100%);
  opacity: 0.74;
}

[data-theme='stormwatch'] .theme-atmo-horizon.fx-max {
  height: 6.4rem;
  background:
    linear-gradient(180deg,
      rgb(var(--storm-horizon-ember) / 0) 0%,
      rgb(var(--storm-horizon-ember) / 0.26) 38%,
      rgb(var(--storm-horizon-ember) / 0.54) 62%,
      rgb(var(--storm-rain) / 0.16) 82%,
      rgb(var(--storm-rain) / 0) 100%),
    linear-gradient(90deg, rgb(var(--storm-rain) / 0.30) 0%, rgb(var(--storm-horizon-ember) / 0.36) 42%, rgb(var(--storm-rain) / 0.34) 100%);
  opacity: 0.96;
}

[data-theme='stormwatch'] .theme-atmo-ridges {
  left: 0;
  right: 0;
  bottom: 0;
  height: 5.9rem;
  background:
    linear-gradient(164deg, rgb(var(--storm-ridge-dark) / 0.93) 18%, rgb(var(--storm-ridge-dark) / 0.24) 63%, rgb(var(--storm-ridge-dark) / 0) 100%),
    linear-gradient(24deg, rgb(var(--storm-ridge-dark) / 0.84) 20%, rgb(var(--storm-ridge-dark) / 0.08) 72%, rgb(var(--storm-ridge-dark) / 0) 100%);
  opacity: 0.88;
}

[data-theme='stormwatch'] .theme-atmo-ridges.fx-max {
  height: 7.8rem;
  opacity: 1;
}

[data-theme='mario'] .theme-atmo::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(80px 80px at 80% 14%, rgb(var(--warning) / 0.26) 0%, rgb(var(--warning) / 0) 74%),
    radial-gradient(320px 160px at 20% 84%, rgb(var(--cyan) / 0.08) 0%, transparent 78%),
    radial-gradient(320px 160px at 80% 86%, rgb(var(--magenta) / 0.08) 0%, transparent 78%),
    linear-gradient(180deg,
      rgb(255 255 255 / 0.06) 0%,
      rgb(255 255 255 / 0.02) 40%,
      rgb(var(--surface-1) / 0.08) 100%);
  opacity: 0.5;
  z-index: 0;
}

[data-theme='mario'] .theme-atmo.fx-max::before {
  background:
    radial-gradient(96px 96px at 80% 14%, rgb(var(--warning) / 0.34) 0%, rgb(var(--warning) / 0) 76%),
    radial-gradient(360px 180px at 20% 84%, rgb(var(--cyan) / 0.13) 0%, transparent 80%),
    radial-gradient(360px 180px at 80% 86%, rgb(var(--magenta) / 0.13) 0%, transparent 80%),
    linear-gradient(180deg,
      rgb(255 255 255 / 0.08) 0%,
      rgb(255 255 255 / 0.03) 38%,
      rgb(var(--surface-1) / 0.14) 100%);
  opacity: 0.96;
}

[data-theme='mario'] .theme-atmo-header {
  border-bottom-color: rgb(var(--header-border) / 0.92);
  box-shadow:
    inset 0 -1px 0 rgb(var(--warning) / 0.24),
    0 10px 24px rgba(0, 0, 0, 0.32);
}

[data-theme='mario'] .theme-atmo-header.fx-max {
  box-shadow:
    inset 0 -1px 0 rgb(var(--warning) / 0.38),
    0 14px 30px rgba(0, 0, 0, 0.4);
}

[data-theme='mario'] .theme-atmo-bands {
  inset: 0;
  background:
    repeating-linear-gradient(178deg,
      rgb(var(--cyan) / 0.10) 0,
      rgb(var(--cyan) / 0.10) 1px,
      transparent 1px,
      transparent 16px),
    repeating-linear-gradient(2deg,
      rgb(var(--warning) / 0.08) 0,
      rgb(var(--warning) / 0.08) 1px,
      transparent 1px,
      transparent 21px);
  mix-blend-mode: screen;
  opacity: 0.14;
}

[data-theme='mario'] .theme-atmo-bands.fx-max {
  background:
    repeating-linear-gradient(178deg,
      rgb(var(--cyan) / 0.15) 0,
      rgb(var(--cyan) / 0.15) 1px,
      transparent 1px,
      transparent 12px),
    repeating-linear-gradient(2deg,
      rgb(var(--warning) / 0.13) 0,
      rgb(var(--warning) / 0.13) 1px,
      transparent 1px,
      transparent 16px);
  opacity: 0.4;
}

[data-theme='mario'] .theme-atmo-horizon {
  left: 0;
  right: 0;
  bottom: 0;
  height: 3.8rem;
  background:
    linear-gradient(180deg,
      rgb(var(--warning) / 0) 0%,
      rgb(var(--warning) / 0.15) 56%,
      rgb(var(--warning) / 0.26) 72%,
      rgb(var(--warning) / 0) 100%),
    linear-gradient(90deg, rgb(var(--cyan) / 0.16) 0%, rgb(var(--warning) / 0.20) 52%, rgb(var(--magenta) / 0.14) 100%);
  opacity: 0.4;
}

[data-theme='mario'] .theme-atmo-horizon.fx-max {
  height: 5.2rem;
  background:
    linear-gradient(180deg,
      rgb(var(--warning) / 0) 0%,
      rgb(var(--warning) / 0.22) 46%,
      rgb(var(--warning) / 0.38) 68%,
      rgb(var(--magenta) / 0.08) 82%,
      rgb(var(--magenta) / 0) 100%),
    linear-gradient(90deg, rgb(var(--cyan) / 0.22) 0%, rgb(var(--warning) / 0.30) 52%, rgb(var(--magenta) / 0.22) 100%);
  opacity: 0.84;
}

[data-theme='mario'] .theme-atmo-ridges {
  left: 0;
  right: 0;
  bottom: 0;
  height: 5.2rem;
  background:
    linear-gradient(164deg, rgb(var(--surface-2) / 0.8) 18%, rgb(var(--surface-2) / 0.08) 64%, rgb(var(--surface-2) / 0) 100%),
    linear-gradient(18deg, rgb(var(--surface-1) / 0.74) 18%, rgb(var(--surface-1) / 0.06) 72%, rgb(var(--surface-1) / 0) 100%);
  opacity: 0.4;
}

[data-theme='mario'] .theme-atmo-ridges.fx-max {
  height: 6.4rem;
  opacity: 0.74;
}

[data-theme='hyperborea'] .theme-atmo::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(120px 120px at 50% 10%, rgb(var(--cyan) / 0.16) 0%, rgb(var(--cyan) / 0) 74%),
    linear-gradient(180deg,
      rgb(var(--hyperborea-cloud) / 0.2) 0%,
      rgb(var(--hyperborea-cloud) / 0.08) 40%,
      transparent 100%);
  opacity: 0.6;
  z-index: 0;
}

[data-theme='hyperborea'] .theme-atmo.fx-max::before {
  background:
    radial-gradient(160px 160px at 50% 10%, rgb(var(--cyan) / 0.24) 0%, rgb(var(--cyan) / 0) 76%),
    linear-gradient(180deg,
      rgb(var(--hyperborea-cloud) / 0.3) 0%,
      rgb(var(--hyperborea-cloud) / 0.1) 40%,
      transparent 100%);
  opacity: 0.85;
}

[data-theme='hyperborea'] .theme-atmo-header {
  border-bottom-color: rgb(var(--header-border) / 0.9);
  box-shadow:
    inset 0 -1px 0 rgb(var(--cyan) / 0.22),
    0 12px 30px rgba(0, 0, 0, 0.4);
}

[data-theme='hyperborea'] .theme-atmo-header.fx-max {
  box-shadow:
    inset 0 -1px 0 rgb(var(--cyan) / 0.42),
    0 16px 36px rgba(0, 0, 0, 0.48);
}

[data-theme='hyperborea'] .theme-atmo-bands {
  inset: 0;
  background:
    repeating-linear-gradient(166deg,
      rgb(var(--cyan) / 0.1) 0,
      rgb(var(--cyan) / 0.1) 1px,
      transparent 1px,
      transparent 11px);
  mix-blend-mode: screen;
  opacity: 0.2;
}

[data-theme='hyperborea'] .theme-atmo-bands.fx-max {
  background:
    repeating-linear-gradient(166deg,
      rgb(var(--cyan) / 0.15) 0,
      rgb(var(--cyan) / 0.15) 1px,
      transparent 1px,
      transparent 8px);
  opacity: 0.4;
}

[data-theme='hyperborea'] .theme-atmo-horizon {
  left: 0;
  right: 0;
  bottom: 0;
  height: 4.5rem;
  background:
    linear-gradient(180deg,
      rgb(var(--magenta) / 0) 0%,
      rgb(var(--magenta) / 0.1) 50%,
      rgb(var(--magenta) / 0.2) 70%,
      rgb(var(--magenta) / 0.0) 100%),
    linear-gradient(90deg, rgb(var(--cyan) / 0.15) 0%, rgb(var(--magenta) / 0.15) 50%, rgb(var(--cyan) / 0.15) 100%);
  opacity: 0.6;
}

[data-theme='hyperborea'] .theme-atmo-horizon.fx-max {
  height: 6.4rem;
  background:
    linear-gradient(180deg,
      rgb(var(--magenta) / 0) 0%,
      rgb(var(--magenta) / 0.15) 50%,
      rgb(var(--magenta) / 0.3) 70%,
      rgb(var(--magenta) / 0.0) 100%),
    linear-gradient(90deg, rgb(var(--cyan) / 0.25) 0%, rgb(var(--magenta) / 0.25) 50%, rgb(var(--cyan) / 0.25) 100%);
  opacity: 0.8;
}

[data-theme='hyperborea'] .theme-atmo-ridges {
  left: 0;
  right: 0;
  bottom: 0;
  height: 5.9rem;
  background:
    linear-gradient(164deg, rgb(var(--hyperborea-ridge) / 0.93) 18%, rgb(var(--hyperborea-ridge) / 0.24) 63%, rgb(var(--hyperborea-ridge) / 0) 100%);
  opacity: 0.7;
}

[data-theme='hyperborea'] .theme-atmo-ridges.fx-max {
  height: 7.8rem;
  opacity: 0.9;
}

@media (max-width: 900px) {
  [data-theme='league'] .theme-atmo-bands {
    opacity: 0.28;
    background:
      radial-gradient(50px 50px at 62% 16%, rgb(var(--nocturne-moon) / 0.46) 0%, rgb(var(--nocturne-moon) / 0) 74%),
      repeating-linear-gradient(176deg,
        rgb(var(--nocturne-aurora-cyan) / 0.18) 0,
        rgb(var(--nocturne-aurora-cyan) / 0.18) 1px,
        transparent 1px,
        transparent 14px),
      linear-gradient(180deg,
        rgb(var(--nocturne-aurora-cyan) / 0.18) 0%,
        rgb(var(--nocturne-aurora-cyan) / 0.06) 40%,
        rgb(var(--nocturne-horizon-amber) / 0.20) 76%,
        rgb(var(--nocturne-horizon-amber) / 0) 100%);
  }

  [data-theme='league'] .theme-atmo-ridges {
    height: 3.75rem;
    opacity: 0.72;
  }

  [data-theme='synthwave'] .theme-atmo-bands {
    opacity: 0.25;
  }

  [data-theme='synthwave'] .theme-atmo-bands.fx-max {
    opacity: 0.52;
  }

  [data-theme='synthwave'] .theme-atmo-horizon {
    height: 3.2rem;
  }

  [data-theme='synthwave'] .theme-atmo-horizon.fx-max {
    height: 4.2rem;
  }

  [data-theme='synthwave'] .theme-atmo-ridges {
    height: 4.6rem;
    opacity: 0.66;
  }

  [data-theme='synthwave'] .theme-atmo-ridges.fx-max {
    height: 5.6rem;
    opacity: 0.82;
  }

  [data-theme='tropical'] .theme-atmo-bands {
    opacity: 0.2;
  }

  [data-theme='tropical'] .theme-atmo-canopy {
    opacity: 0.3;
  }

  [data-theme='tropical'] .theme-atmo-canopy.fx-max {
    opacity: 0.58;
  }

  [data-theme='tropical'] .theme-atmo-bands.fx-max {
    opacity: 0.46;
  }

  [data-theme='tropical'] .theme-atmo-horizon {
    height: 3.5rem;
  }

  [data-theme='tropical'] .theme-atmo-horizon.fx-max {
    height: 4.4rem;
  }

  [data-theme='tropical'] .theme-atmo-ridges {
    height: 4.5rem;
    opacity: 0.64;
  }

  [data-theme='tropical'] .theme-atmo-ridges.fx-max {
    height: 5.4rem;
    opacity: 0.8;
  }

  [data-theme='tropical'] .theme-atmo-palms {
    height: 4.8rem;
    opacity: 0.62;
  }

  [data-theme='tropical'] .theme-atmo-palms::before,
  [data-theme='tropical'] .theme-atmo-palms::after {
    width: 6.8rem;
    height: 4.2rem;
    bottom: -0.4rem;
  }

  [data-theme='tropical'] .theme-atmo-palms::before {
    left: 1.1rem;
  }

  [data-theme='tropical'] .theme-atmo-palms::after {
    right: 1.1rem;
  }

  [data-theme='tropical'] .theme-atmo-palms.fx-max {
    height: 5.8rem;
    opacity: 0.76;
  }

  [data-theme='stormwatch'] .theme-atmo-bands {
    opacity: 0.22;
  }

  [data-theme='stormwatch'] .theme-atmo-bands.fx-max {
    opacity: 0.48;
  }

  [data-theme='stormwatch'] .theme-atmo-horizon {
    height: 3.3rem;
    opacity: 0.62;
  }

  [data-theme='stormwatch'] .theme-atmo-horizon.fx-max {
    height: 4.4rem;
    opacity: 0.82;
  }

  [data-theme='stormwatch'] .theme-atmo-ridges {
    height: 4.4rem;
    opacity: 0.72;
  }

  [data-theme='stormwatch'] .theme-atmo-ridges.fx-max {
    height: 5.6rem;
    opacity: 0.92;
  }

  [data-theme='mario'] .theme-atmo-bands {
    opacity: 0.11;
  }

  [data-theme='mario'] .theme-atmo-bands.fx-max {
    opacity: 0.32;
  }

  [data-theme='mario'] .theme-atmo-horizon {
    height: 2.8rem;
    opacity: 0.34;
  }

  [data-theme='mario'] .theme-atmo-horizon.fx-max {
    height: 3.6rem;
    opacity: 0.7;
  }

  [data-theme='mario'] .theme-atmo-ridges {
    height: 3.7rem;
    opacity: 0.32;
  }

  [data-theme='mario'] .theme-atmo-ridges.fx-max {
    height: 4.6rem;
    opacity: 0.62;
  }
}

.sc-pageAmbient {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(1050px 450px at 5% -10%,
      rgb(var(--ambient-left) / var(--ambient-left-alpha)) 0%,
      transparent 68%),
    radial-gradient(940px 420px at 95% 0%,
      rgb(var(--ambient-right) / var(--ambient-right-alpha)) 0%,
      transparent 68%);
}

.sc-pageAmbientOrbLeft {
  position: absolute;
  left: -4rem;
  top: 5rem;
  height: 14rem;
  width: 14rem;
  border-radius: 9999px;
  pointer-events: none;
  background: rgb(var(--ambient-left) / var(--ambient-orb-left-alpha));
  filter: blur(54px);
}

.sc-pageAmbientOrbRight {
  position: absolute;
  right: -4rem;
  top: 0.75rem;
  height: 17rem;
  width: 17rem;
  border-radius: 9999px;
  pointer-events: none;
  background: rgb(var(--ambient-right) / var(--ambient-orb-right-alpha));
  filter: blur(60px);
}

/* ---------- Utility helper classes (variable-driven) ---------- */

.brand-title {
  font-family: var(--font-brand);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  font-weight: 900;
}

.brand-font {
  font-family: var(--font-brand);
}

.theme-transition {
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hide scrollbars but keep scrolling (used with Tailwind CDN utilities). */
.scrollbar-hide {
  -ms-overflow-style: none;
  /* IE/Edge legacy */
  scrollbar-width: none;
  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
  /* Chrome/Safari */
}

/* ==========================================================================
   Slopcast “chrome” primitives (.sc-*)
   Rendered via semantic tokens above; overridden per-theme.
   ========================================================================== */

.sc-header {
  background: linear-gradient(to bottom, rgb(var(--header-bg-1)), rgb(var(--header-bg-2)));
  border-bottom: 1px solid rgb(var(--header-border) / 0.9);
  color: rgb(var(--header-text));
  box-shadow:
    0 1px 0 rgb(255 255 255 / 0.06),
    0 10px 20px rgba(0, 0, 0, 0.22);
}

.sc-panel,
.sc-screen,
.sc-kpi {
  position: relative;
  overflow: hidden;
}

.sc-panel {
  border-radius: var(--radius-panel);
  border: 1px solid rgb(var(--panel-border) / 0.85);
  background: linear-gradient(to bottom, rgb(var(--panel-bg-1)), rgb(var(--panel-bg-2)));
  box-shadow: var(--shadow-card);
}

.sc-panel::before {
  content: '';
  position: absolute;
  inset: 1px;
  pointer-events: none;
  border-radius: calc(var(--radius-panel) - 2px);
  box-shadow:
    inset 0 1px 0 rgb(var(--panel-inset-hi) / 0.22),
    inset 0 -1px 0 rgb(var(--panel-inset-lo) / 0.25);
}

.sc-panelTitlebar {
  background: linear-gradient(to bottom,
      rgb(var(--_panel-title-bg-1, var(--panel-title-bg-1))),
      rgb(var(--_panel-title-bg-2, var(--panel-title-bg-2))));
  color: rgb(var(--_panel-title-text, var(--panel-title-text)));
  border-bottom: 1px solid rgb(var(--_panel-title-border, var(--panel-border)) / 0.90);
}

.sc-screen {
  border-radius: var(--radius-panel);
  border: 1px solid rgb(var(--screen-border) / 0.9);
  background: linear-gradient(to bottom, rgb(var(--screen-bg-1)), rgb(var(--screen-bg-2)));
  box-shadow: var(--shadow-card);
}

.sc-screen::before {
  content: '';
  position: absolute;
  inset: 1px;
  pointer-events: none;
  border-radius: calc(var(--radius-panel) - 2px);
  box-shadow:
    inset 0 1px 0 rgb(var(--screen-inset-hi) / 0.10),
    inset 0 -1px 0 rgb(var(--screen-inset-lo) / 0.35);
}

.sc-screenTitlebar {
  background: linear-gradient(to bottom,
      rgb(var(--_screen-title-bg-1, var(--screen-title-bg-1))),
      rgb(var(--_screen-title-bg-2, var(--screen-title-bg-2))));
  color: rgb(var(--_screen-title-text, var(--screen-title-text)));
  border-bottom: 1px solid rgb(var(--_screen-title-border, var(--screen-border)) / 0.90);
}

/* Titlebar variants (work for both panels + screens) */
.sc-titlebar--red {
  --_panel-title-bg-1: var(--bar-red-bg-1);
  --_panel-title-bg-2: var(--bar-red-bg-2);
  --_panel-title-text: var(--bar-red-text);
  --_panel-title-border: var(--bar-red-border);
  --_screen-title-bg-1: var(--bar-red-bg-1);
  --_screen-title-bg-2: var(--bar-red-bg-2);
  --_screen-title-text: var(--bar-red-text);
  --_screen-title-border: var(--bar-red-border);
}

.sc-titlebar--yellow {
  --_panel-title-bg-1: var(--bar-yellow-bg-1);
  --_panel-title-bg-2: var(--bar-yellow-bg-2);
  --_panel-title-text: var(--bar-yellow-text);
  --_panel-title-border: var(--bar-yellow-border);
  --_screen-title-bg-1: var(--bar-yellow-bg-1);
  --_screen-title-bg-2: var(--bar-yellow-bg-2);
  --_screen-title-text: var(--bar-yellow-text);
  --_screen-title-border: var(--bar-yellow-border);
}

.sc-titlebar--blue {
  --_panel-title-bg-1: var(--bar-blue-bg-1);
  --_panel-title-bg-2: var(--bar-blue-bg-2);
  --_panel-title-text: var(--bar-blue-text);
  --_panel-title-border: var(--bar-blue-border);
  --_screen-title-bg-1: var(--bar-blue-bg-1);
  --_screen-title-bg-2: var(--bar-blue-bg-2);
  --_screen-title-text: var(--bar-blue-text);
  --_screen-title-border: var(--bar-blue-border);
}

.sc-titlebar--neutral {
  --_panel-title-bg-1: var(--bar-neutral-bg-1);
  --_panel-title-bg-2: var(--bar-neutral-bg-2);
  --_panel-title-text: var(--bar-neutral-text);
  --_panel-title-border: var(--bar-neutral-border);
  --_screen-title-bg-1: var(--bar-neutral-bg-1);
  --_screen-title-bg-2: var(--bar-neutral-bg-2);
  --_screen-title-text: var(--bar-neutral-text);
  --_screen-title-border: var(--bar-neutral-border);
}

.sc-titlebar--brown {
  --_panel-title-bg-1: var(--bar-brown-bg-1);
  --_panel-title-bg-2: var(--bar-brown-bg-2);
  --_panel-title-text: var(--bar-brown-text);
  --_panel-title-border: var(--bar-brown-border);
  --_screen-title-bg-1: var(--bar-brown-bg-1);
  --_screen-title-bg-2: var(--bar-brown-bg-2);
  --_screen-title-text: var(--bar-brown-text);
  --_screen-title-border: var(--bar-brown-border);
}

.sc-titlebar--dark {
  --_panel-title-bg-1: var(--bar-dark-bg-1);
  --_panel-title-bg-2: var(--bar-dark-bg-2);
  --_panel-title-text: var(--bar-dark-text);
  --_panel-title-border: var(--bar-dark-border);
  --_screen-title-bg-1: var(--bar-dark-bg-1);
  --_screen-title-bg-2: var(--bar-dark-bg-2);
  --_screen-title-text: var(--bar-dark-text);
  --_screen-title-border: var(--bar-dark-border);
}

/* KPI blocks */
.sc-kpi {
  border-radius: var(--radius-kpi);
  border: 1px solid rgb(var(--_kpi-border, var(--kpi-border)) / 1);
  background: linear-gradient(to bottom,
      rgb(var(--_kpi-bg-1, var(--kpi-bg-1))),
      rgb(var(--_kpi-bg-2, var(--kpi-bg-2))));
  box-shadow: var(--shadow-card);
}

.sc-kpi::before {
  content: '';
  position: absolute;
  inset: 1px;
  pointer-events: none;
  border-radius: calc(var(--radius-kpi) - 2px);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.18),
    inset 0 -1px 0 rgb(0 0 0 / 0.25);
}

.sc-kpiTitlebar {
  background: linear-gradient(to bottom,
      rgb(var(--_kpi-title-bg-1, var(--kpi-title-bg-1))),
      rgb(var(--_kpi-title-bg-2, var(--kpi-title-bg-2))));
  color: rgb(var(--_kpi-title-text, var(--kpi-title-text)));
  border-bottom: 1px solid rgb(var(--_kpi-border, var(--kpi-border)) / 1);
}

.sc-kpiValue {
  color: rgb(var(--_kpi-value-text, var(--kpi-value-text)));
}

.sc-kpi--main {
  --_kpi-bg-1: var(--kpi-main-bg-1);
  --_kpi-bg-2: var(--kpi-main-bg-2);
  --_kpi-border: var(--kpi-main-border);
  --_kpi-title-bg-1: var(--kpi-main-title-bg-1);
  --_kpi-title-bg-2: var(--kpi-main-title-bg-2);
  --_kpi-title-text: var(--kpi-main-title-text);
  --_kpi-value-text: var(--kpi-main-value-text);
}

.sc-kpi--tile {
  --_kpi-bg-1: var(--kpi-tile-bg-1);
  --_kpi-bg-2: var(--kpi-tile-bg-2);
  --_kpi-border: var(--kpi-tile-border);
  --_kpi-title-bg-1: var(--kpi-tile-title-bg-1);
  --_kpi-title-bg-2: var(--kpi-tile-title-bg-2);
  --_kpi-title-text: var(--kpi-tile-title-text);
  --_kpi-value-text: var(--kpi-tile-value-text);
}

.sc-kpi--dangerBody {
  --_kpi-bg-1: var(--danger);
  --_kpi-bg-2: var(--danger);
  --_kpi-border: var(--bar-red-border);
  --_kpi-value-text: 255 255 255;
}

/* Buttons */
.sc-btnPrimary {
  background: linear-gradient(to bottom, rgb(var(--btn-primary-bg-1)), rgb(var(--btn-primary-bg-2)));
  border: 1px solid rgb(var(--btn-primary-border) / 1);
  color: rgb(var(--btn-primary-text));
  box-shadow:
    0 1px 0 rgb(255 255 255 / 0.15),
    0 10px 18px rgba(0, 0, 0, 0.25);
}

.sc-btnPrimary:hover {
  filter: brightness(1.05);
}

.sc-btnPrimary:active {
  transform: translateY(1px);
}

.sc-btnPrimary:focus {
  outline: none;
}

.sc-btnPrimary:focus-visible {
  outline: 2px solid rgb(var(--bar-red-bg-1) / 0.55);
  outline-offset: 2px;
}

.sc-btnSecondary {
  background: linear-gradient(to bottom, rgb(var(--btn-secondary-bg-1)), rgb(var(--btn-secondary-bg-2)));
  border: 1px solid rgb(var(--btn-secondary-border) / 0.95);
  color: rgb(var(--btn-secondary-text));
  box-shadow:
    0 1px 0 rgb(255 255 255 / 0.10),
    0 10px 18px rgba(0, 0, 0, 0.20);
}

.sc-btnSecondary:hover {
  filter: brightness(1.04);
}

.sc-btnSecondary:active {
  transform: translateY(1px);
}

.sc-btnSecondary:focus {
  outline: none;
}

.sc-btnSecondary:focus-visible {
  outline: 2px solid rgb(var(--bar-red-bg-1) / 0.55);
  outline-offset: 2px;
}

/* ==========================================================================
   Light inset primitives (cream/white surfaces for Classic controls/tables)
   ========================================================================== */

.sc-insetLight {
  background: linear-gradient(to bottom, rgb(var(--inset-bg-1)), rgb(var(--inset-bg-2)));
  border: 1px solid rgb(var(--inset-border) / 0.65);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.75),
    inset 0 -1px 0 rgb(0 0 0 / 0.10);
  color: rgb(var(--inset-text));
}

.sc-insetText {
  color: rgb(var(--inset-text));
}

.sc-insetMuted {
  color: rgb(var(--inset-muted));
}

.sc-inputClassic,
.sc-selectClassic {
  background: rgb(var(--inset-bg-1));
  border: 1px solid rgb(var(--inset-border) / 0.75);
  color: rgb(var(--inset-text));
}

.sc-inputClassic::placeholder {
  color: rgb(var(--inset-muted) / 0.65);
}

.sc-inputClassic:focus,
.sc-selectClassic:focus {
  outline: none;
  border-color: rgb(var(--bar-red-bg-1) / 0.95);
  box-shadow: 0 0 0 2px rgb(var(--bar-red-bg-1) / 0.18);
}

/* ==========================================================================
   Dark (navy) inset primitives (Classic module fields)
   ========================================================================== */

.sc-insetDark {
  background: linear-gradient(to bottom, rgb(var(--surface-2)), rgb(var(--surface-1)));
  border: 1px solid rgb(var(--border) / 0.65);
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.06),
    inset 0 -1px 0 rgb(0 0 0 / 0.45);
  color: rgb(var(--text));
}

.sc-inputNavy,
.sc-selectNavy {
  background: linear-gradient(to bottom, rgb(var(--surface-2)), rgb(var(--surface-1)));
  border: 1px solid rgb(var(--border) / 0.75);
  color: rgb(var(--text));
  box-shadow:
    inset 0 1px 0 rgb(255 255 255 / 0.06),
    inset 0 -1px 0 rgb(0 0 0 / 0.45);
}

.sc-inputNavy::placeholder {
  color: rgb(var(--muted) / 0.70);
}

.sc-inputNavy:focus,
.sc-selectNavy:focus {
  outline: none;
  border-color: rgb(var(--bar-red-bg-1) / 0.95);
  box-shadow: 0 0 0 2px rgb(var(--bar-red-bg-1) / 0.18);
}

/* Range input helper (track + accent). Use with explicit height in markup. */
.sc-rangeNavy {
  accent-color: rgb(var(--lav));
  background: rgb(var(--surface-1));
  border: 1px solid rgb(var(--border) / 0.65);
  border-radius: 9999px;
}

.sc-rangeNavy:focus {
  outline: none;
}

.sc-rangeNavy:focus-visible {
  box-shadow: 0 0 0 2px rgb(var(--bar-red-bg-1) / 0.18);
}

.glow-cyan {
  box-shadow: var(--shadow-glow-cyan);
}

.glow-magenta {
  box-shadow: var(--shadow-glow-magenta);
}

.glow-cyan-hover:hover {
  box-shadow: var(--shadow-glow-cyan);
}

.glow-magenta-hover:hover {
  box-shadow: var(--shadow-glow-magenta);
}

.shadow-glow-cyan {
  box-shadow: var(--shadow-glow-cyan);
}

.shadow-glow-magenta {
  box-shadow: var(--shadow-glow-magenta);
}

.neon-border-magenta {
  border: 1px solid rgb(var(--magenta) / 0.35);
  box-shadow: var(--shadow-glow-magenta);
}

/* Nocturne accent strip on core chrome surfaces */
[data-theme='league'] .sc-panel::after,
[data-theme='league'] .sc-screen::after,
[data-theme='league'] .sc-kpi::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 2px;
  pointer-events: none;
  background: linear-gradient(90deg, rgb(var(--cyan)) 0%, rgb(var(--warning)) 46%, rgb(var(--success)) 100%);
  opacity: 0.62;
}

/* Synthwave accent strip on core chrome surfaces */
[data-theme='synthwave'] .sc-panel::after,
[data-theme='synthwave'] .sc-screen::after,
[data-theme='synthwave'] .sc-kpi::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 2px;
  pointer-events: none;
  background: linear-gradient(90deg, rgb(var(--magenta)) 0%, rgb(var(--cyan)) 52%, rgb(var(--lav)) 100%);
  opacity: 0.68;
}

/* Tropical accent strip on core chrome surfaces */
[data-theme='tropical'] .sc-panel::after,
[data-theme='tropical'] .sc-screen::after,
[data-theme='tropical'] .sc-kpi::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 2px;
  pointer-events: none;
  background: linear-gradient(90deg, rgb(var(--cyan)) 0%, rgb(var(--warning)) 45%, rgb(var(--magenta)) 100%);
  opacity: 0.64;
}

/* ---------- Gradient helpers ---------- */
.grad-sunset {
  background: linear-gradient(135deg, rgb(var(--magenta)) 0%, rgb(var(--violet)) 55%, rgb(var(--surface-1)) 100%);
}

.grad-cyan-pop {
  background: linear-gradient(135deg, rgb(var(--cyan)) 0%, rgb(var(--lav)) 55%, rgb(var(--magenta)) 100%);
}

/* ---------- Retro grid (legacy CSS fallback) ---------- */
[data-theme='synthwave'] .retro-grid {
  display: none;           /* replaced by SynthwaveBackground SVG component */
}
:root .retro-grid {
  display: none;
}

/* ---------- Synthwave SVG Background Animations ---------- */

/* Wrapper positioning is handled inline; keep z-index stable */
[data-theme='synthwave'] .synthwave-bg-wrap {
  opacity: 0.82;
  transition: opacity 0.6s ease;
}

/* ── Grid pulse ── */
@keyframes swGridPulse {
  0%, 100% { opacity: 0.55; }
  50%      { opacity: 0.82; }
}

[data-theme='synthwave'] .sw-grid-v,
[data-theme='synthwave'] .sw-grid-h {
  animation: swGridPulse 4s ease-in-out infinite;
}
[data-theme='synthwave'] .sw-grid-h {
  animation-delay: -2s;   /* offset so V and H alternate */
}

/* ── Star twinkle (three timing groups) ── */
@keyframes swTwinkleFast {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0.35; }
}
@keyframes swTwinkleMed {
  0%, 100% { opacity: 0.85; }
  40%      { opacity: 0.30; }
  80%      { opacity: 0.95; }
}
@keyframes swTwinkleSlow {
  0%, 100% { opacity: 0.45; }
  30%      { opacity: 0.18; }
  70%      { opacity: 0.55; }
}

[data-theme='synthwave'] .sw-star-bright {
  animation: swTwinkleFast 3s ease-in-out infinite;
}
[data-theme='synthwave'] .sw-star-mid {
  animation: swTwinkleMed 5s ease-in-out infinite;
  animation-delay: -1.4s;
}
[data-theme='synthwave'] .sw-star-faint {
  animation: swTwinkleSlow 7s ease-in-out infinite;
  animation-delay: -3s;
}

/* ── Sun breathe ── */
@keyframes swSunBreathe {
  0%, 100% { opacity: 0.82; transform: scale(1); }
  50%      { opacity: 1;    transform: scale(1.025); }
}

[data-theme='synthwave'] .sw-sun {
  transform-origin: 960px 440px;
  animation: swSunBreathe 6s ease-in-out infinite;
}
[data-theme='synthwave'] .sw-sun-glow {
  animation: swSunBreathe 6s ease-in-out infinite;
  animation-delay: -0.5s;
}

/* ── Shooting star streaks ── */
@keyframes swShootingStar {
  0%       { opacity: 0;   transform: translate(0, 0); }
  8%       { opacity: 0.7; }
  20%      { opacity: 0.8; transform: translate(-40px, 30px); }
  30%      { opacity: 0;   transform: translate(-60px, 45px); }
  100%     { opacity: 0;   transform: translate(-60px, 45px); }
}

[data-theme='synthwave'] .sw-shooting-star-1 {
  animation: swShootingStar 8s ease-out infinite;
  animation-delay: 0s;
}
[data-theme='synthwave'] .sw-shooting-star-2 {
  animation: swShootingStar 12s ease-out infinite;
  animation-delay: -4s;
}
[data-theme='synthwave'] .sw-shooting-star-3 {
  animation: swShootingStar 15s ease-out infinite;
  animation-delay: -9s;
}
[data-theme='synthwave'] .sw-shooting-star-4 {
  animation: swShootingStar 10s ease-out infinite;
  animation-delay: -6s;
}

/* ── Mountain edge glow pulse ── */
@keyframes swEdgeGlow {
  0%, 100% { opacity: 1; filter: url(#sw-glow); }
  50%      { opacity: 0.55; }
}

[data-theme='synthwave'] .sw-mountain-edge {
  animation: swEdgeGlow 5s ease-in-out infinite;
}

/* ── Mountain contour shimmer ── */
@keyframes swContourShimmer {
  0%, 100% { opacity: 0.25; }
  50%      { opacity: 0.45; }
}

[data-theme='synthwave'] .sw-mountain-contour {
  animation: swContourShimmer 6s ease-in-out infinite;
}

/* ── Grid scan line (bright sweep moving down) ── */
@keyframes swScanLine {
  0%   { transform: translateY(-420px); opacity: 0; }
  5%   { opacity: 0.6; }
  95%  { opacity: 0.6; }
  100% { transform: translateY(420px); opacity: 0; }
}

[data-theme='synthwave'] .sw-grid-h::after {
  content: '';
  position: absolute;
  left: 0; right: 0;
  height: 4px;
  background: linear-gradient(90deg, transparent, rgba(0, 229, 255, 0.5), transparent);
  animation: swScanLine 10s linear infinite;
}

/* ── Sun rays rotation ── */
@keyframes swSpin {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ── Sun ray individual pulse/flash ── */
@keyframes swRayPulse {
  0%, 100% { opacity: 0.22; }
  25%      { opacity: 0.55; }
  50%      { opacity: 0.18; }
  75%      { opacity: 0.48; }
}

[data-theme='synthwave'] .sw-sun-rays {
  transform-origin: 960px 440px;
  animation: swSpin 60s linear infinite;
}

[data-theme='synthwave'] .sw-sun-ray {
  animation: swRayPulse 4s ease-in-out infinite;
}
[data-theme='synthwave'] .sw-sun-ray:nth-child(2n) {
  animation-delay: -1s;
  animation-duration: 5s;
}
[data-theme='synthwave'] .sw-sun-ray:nth-child(3n) {
  animation-delay: -2.2s;
  animation-duration: 3.5s;
}
[data-theme='synthwave'] .sw-sun-ray:nth-child(5n) {
  animation-delay: -0.6s;
  animation-duration: 6s;
}

/* ── Sun inner pulse ring ── */
@keyframes swSunRingPulse {
  0%, 100% { r: 95;  opacity: 0.0; }
  50%      { r: 160; opacity: 0.35; }
}

[data-theme='synthwave'] .sw-sun-pulse-ring {
  transform-origin: 960px 440px;
  animation: swSunRingPulse 3.5s ease-in-out infinite;
}

/* ── Foreground beam sweep ── */
@keyframes swBeamSweep {
  0%, 100% { opacity: 0.0; }
  15%      { opacity: 0.32; }
  50%      { opacity: 0.14; }
  85%      { opacity: 0.28; }
}

[data-theme='synthwave'] .sw-fg-beam {
  animation: swBeamSweep 6s ease-in-out infinite;
}
[data-theme='synthwave'] .sw-fg-beam:nth-child(2n) {
  animation-delay: -1.5s;
  animation-duration: 7s;
}
[data-theme='synthwave'] .sw-fg-beam:nth-child(3n) {
  animation-delay: -3s;
  animation-duration: 5s;
}
[data-theme='synthwave'] .sw-fg-beam:nth-child(5n) {
  animation-delay: -4.2s;
  animation-duration: 8s;
}
[data-theme='synthwave'] .sw-fg-beam:nth-child(7n) {
  animation-delay: -0.8s;
  animation-duration: 4.5s;
}

/* ── Reduced-motion preference ── */
@media (prefers-reduced-motion: reduce) {
  [data-theme='synthwave'] .sw-grid-v,
  [data-theme='synthwave'] .sw-grid-h,
  [data-theme='synthwave'] .sw-star-bright,
  [data-theme='synthwave'] .sw-star-mid,
  [data-theme='synthwave'] .sw-star-faint,
  [data-theme='synthwave'] .sw-sun,
  [data-theme='synthwave'] .sw-sun-glow,
  [data-theme='synthwave'] .sw-shooting-star,
  [data-theme='synthwave'] .sw-mountain-edge,
  [data-theme='synthwave'] .sw-mountain-contour,
  [data-theme='synthwave'] .sw-sun-rays,
  [data-theme='synthwave'] .sw-sun-ray,
  [data-theme='synthwave'] .sw-sun-pulse-ring,
  [data-theme='synthwave'] .sw-fg-beam {
    animation: none !important;
  }
}

/* ---------- Scrollbar ---------- */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgb(var(--bg-deep));
}

::-webkit-scrollbar-thumb {
  background: rgb(var(--border));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--cyan));
}

/* ==========================================================================
   Light mode overrides for Slate theme
   ========================================================================== */

[data-theme='slate'][data-mode='light'] {
  --bg-deep: 248 250 252;      /* #f8fafc */
  --bg-space: 241 245 249;     /* #f1f5f9 */
  --surface-1: 255 255 255;    /* #ffffff */
  --surface-2: 241 245 249;    /* #f1f5f9 */
  --border: 203 213 225;       /* #cbd5e1 */
  --text: 15 23 42;            /* #0f172a */
  --muted: 100 116 139;        /* #64748b */
  --shadow-glow-cyan: 0 0 10px rgba(59, 130, 246, 0.15);
  --shadow-glow-magenta: 0 0 10px rgba(236, 72, 153, 0.15);
  --shadow-card: 0 4px 16px rgba(0, 0, 0, 0.08);
  --grad-space:
    radial-gradient(1200px circle at 10% -20%, rgba(59, 130, 246, 0.08) 0%, rgba(59, 130, 246, 0) 58%),
    radial-gradient(980px circle at 92% -8%, rgba(99, 102, 241, 0.06) 0%, rgba(99, 102, 241, 0) 54%),
    linear-gradient(160deg, #f8fafc 0%, #f1f5f9 58%, #e2e8f0 100%);
  --ambient-left-alpha: 0.08;
  --ambient-right-alpha: 0.06;
  --ambient-orb-left-alpha: 0.04;
  --ambient-orb-right-alpha: 0.05;
  --header-bg-1: 241 245 249;
  --header-bg-2: 255 255 255;
  --header-border: 203 213 225;
  --header-text: 15 23 42;
  --bar-neutral-bg-1: 241 245 249;
  --bar-neutral-bg-2: 255 255 255;
  --bar-neutral-text: 15 23 42;
  --bar-neutral-border: 203 213 225;
}
